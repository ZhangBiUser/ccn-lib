{"remainingRequest":"/Users/hq_failmy/Desktop/TFS/客户项目/J/君乐宝/君乐宝乳业学生奶追溯项目/源代码/高定报表/前端代码0405/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hq_failmy/Desktop/TFS/客户项目/J/君乐宝/君乐宝乳业学生奶追溯项目/源代码/高定报表/前端代码0405/src/views/TableModule/Table/Table.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hq_failmy/Desktop/TFS/客户项目/J/君乐宝/君乐宝乳业学生奶追溯项目/源代码/高定报表/前端代码0405/src/views/TableModule/Table/Table.vue","mtime":1554184660512},{"path":"/Users/hq_failmy/Desktop/TFS/客户项目/J/君乐宝/君乐宝乳业学生奶追溯项目/源代码/高定报表/前端代码0405/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hq_failmy/Desktop/TFS/客户项目/J/君乐宝/君乐宝乳业学生奶追溯项目/源代码/高定报表/前端代码0405/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hq_failmy/Desktop/TFS/客户项目/J/君乐宝/君乐宝乳业学生奶追溯项目/源代码/高定报表/前端代码0405/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hq_failmy/Desktop/TFS/客户项目/J/君乐宝/君乐宝乳业学生奶追溯项目/源代码/高定报表/前端代码0405/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport vTable from \"@c/tables/table\";\nimport vSearch from \"@c/dynamicSearch/dynamic_Search\";\n\nimport vEditTable from \"@c/edit_table\";\n\nimport AreaApi from \"../../DictModule/webapi/AreaApi\";\nimport DataApi from \"../../DictModule/webapi/DataApi\";\nimport MatlApi from \"../../MatlModule/webapi/MaterialsApi\";\nimport TableApi from \"../webapi/TableApi\";\nimport moment from \"moment\";\nimport config from \"@/config/index\";\nimport { pageTool } from \"@/js/util.js\";\nexport default {\n  data() {\n    var _ = this;\n    return {\n      isEdit: false,\n      formData: {\n        No: \"\", //编号\n        Name: \"\", //名称\n        Code: \"\", //编码\n        MnenonicCode: \"\" //助记码\n      },\n      // 选择所需的功能按钮\n      // seleFunc: { add: true, export: true, search: true },\n      // 选择所需的功能按钮\n      // seleFunc: { add: true, export: true, search: true },\n      // 动态创建所需的功能按钮，添加 和 导出 功能已封装完善，默认显示\n      seleFunc: {\n        search: true,\n        export: true,\n        addFunList: [\n          {\n            title: \"添加\",\n            method: function() {\n              _.showAddRecordModal();\n            }\n          },\n          {\n            title: \"下载\",\n            method: function(e, item) {\n              console.log(\"下载被点击\");\n            }\n          }\n        ]\n      },\n      search_controls: [\n        {\n          type: \"v_text\",\n          title: \"发货单号1\",\n          key: \"receiptno\"\n        },\n        {\n          type: \"v_singleSelect\",\n          title: \"选择产品\",\n          key: \"materialsid\",\n          apiUrl: MatlApi.GetMaterialsList,\n          //params: { aaa: \"fff\" },\n          selectkey: \"productId\",\n          selectvalue: \"productName\"\n        },\n        {\n          type: \"v_datetime\",\n          title: \"发货开始日期\",\n          key: \"sendstartdate\"\n          //defdate: moment(new Date()).add(-1, 'months').format(\"YYYY-MM-DD\")\n        },\n        {\n          type: \"br\",\n          key: \"bra\"\n        },\n        {\n          type: \"v_doubleSelect\",\n          key: \"sendprovincecity\",\n          list: [\n            {\n              type: \"v_singleSelect\",\n              title: \"发货省份\",\n              key: \"sendprovince\",\n              apiUrl: AreaApi.GetAllProvinceList,\n              selectkey: \"provinceid\",\n              selectvalue: \"provincename\",\n              childrenkey: \"sendcity\"\n            },\n            {\n              type: \"v_singleSelect\",\n              title: \"发货城市\",\n              key: \"sendcity\",\n              apiUrl: AreaApi.GetCityOfProvinceList,\n              parendPostKey: \"AreaId\",\n              selectkey: \"cityid\",\n              selectvalue: \"cityname\"\n            }\n          ]\n        }\n      ],\n      // vEditTable 组件数据\n      dynamicEdits: {\n        // 保存数据API\n        apiUrl: TableApi.AddTableRecord,\n        list: [\n          {\n            // 每行显示编辑框数量类型   可选值  single、duoble\n            lineType: \"double\",\n            rowList: [\n              {\n                type: \"v_text\",\n                title: \"产品名称\",\n                key: \"materialS_NAME\", // 需对应后台返回字段名称\n                // 是否为必填选项\n                isRequest: true,\n                // 校验规则\n                validators: {\n                  notEmpty: {\n                    enabled: true,\n                    message: \"产品名称不能为空\"\n                  }\n                }\n              },\n              {\n                type: \"v_text\",\n                title: \"产品编码\",\n                key: \"materialS_SN\",\n                isRequest: false,\n                validators: {\n                  notEmpty: {\n                    enabled: false\n                  }\n                }\n              }\n            ]\n          },\n          {\n            lineType: \"double\",\n            rowList: [\n              {\n                type: \"v_text\",\n                title: \"产品名称11\",\n                key: \"productName\",\n                isRequest: true,\n                validators: {\n                  notEmpty: {\n                    enabled: true,\n                    message: \"产品名称不能为空\"\n                  }\n                }\n              },\n              {\n                type: \"v_text\",\n                title: \"产品编码11\",\n                key: \"deviceno\",\n                isRequest: false,\n                validators: {\n                  notEmpty: {\n                    enabled: false\n                  }\n                }\n              }\n            ]\n          },\n\n          {\n            lineType: \"double\",\n            rowList: [\n              {\n                type: \"v_text\",\n                title: \"发货单号\",\n                key: \"receipT_NO\",\n                isRequest: true,\n                validators: {\n                  notEmpty: {\n                    enabled: true,\n                    message: \"发货单号不能为空\"\n                  }\n                }\n              },\n              {\n                type: \"v_text\",\n                title: \"批次号\",\n                key: \"batchNo\",\n                isRequest: false,\n                validators: {\n                  notEmpty: {\n                    enabled: false\n                  }\n                }\n              }\n            ]\n          },\n          {\n            lineType: \"double\",\n            rowList: [\n              {\n                type: \"v_singleSelect\",\n                title: \"选择产品\",\n                key: \"materialsid\",\n                apiUrl: MatlApi.GetMaterialsList,\n                //params: { aaa: \"fff\" },\n                selectkey: \"productId\",\n                selectvalue: \"productName\",\n                isRequest: true,\n                validators: {\n                  notEmpty: {\n                    enabled: true\n                  }\n                }\n              },\n              {\n                lineType: \"single\",\n                type: \"v_datetime\",\n                title: \"发货日期\",\n                key: \"receipT_DATE\",\n                isRequest: true,\n                validators: {\n                  notEmpty: {\n                    enabled: true\n                  }\n                }\n                //defdate: moment(new Date()).add(-1, 'months').format(\"YYYY-MM-DD\")\n              }\n            ]\n          },\n          {\n            lineType: \"single\",\n            rowList: [\n              {\n                type: \"v_doubleSelect\",\n                key: \"sendprovincecity\",\n                isRequest: true,\n                list: [\n                  {\n                    type: \"v_singleSelect\",\n                    title: \"发货省份\",\n                    key: \"sendprovince\",\n                    apiUrl: AreaApi.GetAllProvinceList,\n                    selectkey: \"provinceid\",\n                    selectvalue: \"provincename\",\n                    childrenkey: \"sendcity\",\n                    isRequest: false,\n                    validators: {\n                      notEmpty: {\n                        enabled: true\n                      }\n                    }\n                  },\n                  {\n                    type: \"v_singleSelect\",\n                    title: \"发货城市\",\n                    key: \"sendcity\",\n                    apiUrl: AreaApi.GetCityOfProvinceList,\n                    parendPostKey: \"AreaId\",\n                    selectkey: \"cityid\",\n                    selectvalue: \"cityname\",\n                    isRequest: true,\n                    validators: {\n                      notEmpty: {\n                        enabled: true\n                      }\n                    }\n                  }\n                ]\n              }\n            ]\n          }\n        ]\n      },\n      seleTableObj: {}, // 选中的表单行数据\n\n      searchOptions: {\n        requiredCondition: true\n      },\n      tableOption: {\n        tableId: \"sendreport\",\n        tableName: \"发货统计报表\",\n        url: config.pgyerApiUrl + TableApi.TableDataList.options.url,\n        method: TableApi.TableDataList.options.method,\n        uniqueId: \"receipT_NO\",\n        actions: [\n          {\n            key: 'tableEdit',\n            title: \"编辑\",\n            url: config.pgyerApiUrl + TableApi.TableDataList.options.url,\n            method: TableApi.TableDataList.options.method\n          },\n          {\n            key: 'tablePause',\n            title: \"禁用\",\n            url: config.pgyerApiUrl + TableApi.TableDataList.options.url,\n            method: TableApi.TableDataList.options.method\n          }\n        ],\n        columns: [\n          {\n            field: \"materialS_NAME\",\n            title: \"产品名称\",\n            align: \"left\",\n            width: \"150px\"\n          },\n          { field: \"receipT_NO\", title: \"发货单号\", align: \"center\" },\n          { field: \"sendProvince\", title: \"发货省\", align: \"center\" },\n          { field: \"sendCity\", title: \"发货城市\", align: \"center\" },\n          { field: \"receipT_SENDER\", title: \"发货单位\", align: \"center\" },\n          {\n            field: \"receipT_DATE\",\n            title: \"发货日期\",\n            align: \"center\",\n            formatter: function(val, row) {\n              return moment(val).format(\"YYYY-MM-DD HH:mm:ss\");\n            }\n          }\n        ]\n      }\n    };\n  },\n  computed: {\n    exportOptions: function() {\n      return {\n        id: this.tableOption.tableId,\n        name: this.tableOption.tableName,\n        url: TableApi.TableDataList\n      };\n    }\n  },\n  mounted: function() {\n  },\n  methods: {\n    // 表格回调事件名规则   传入的按钮 key + Block\n    // 编辑按钮回调事件\n    tableEditBlock: function(rowId) {\n      let obj = this.$refs.table.tableObj.bootstrapTable(\n        \"getRowByUniqueId\",\n        rowId\n      );\n      this.getSeleReportDataDetail(obj);\n      // console.log(obj);\n    },\n    // 禁用按钮回调事件\n    tablePauseBlock: function(rowId) {\n      let obj = this.$refs.table.tableObj.bootstrapTable(\n        \"getRowByUniqueId\",\n        rowId\n      );\n      this.deleReportData(rowId);\n    },\n    // 动态搜索回调\n    search: function(params) {\n      this.refershTable(params);\n    },\n    // 新建 & 编辑表单记录完成后的回调事件\n    editCallback: function(type, params) {\n      // type = add   type = edit\n      this.refershTable(params);\n    },\n    getSeleReportDataDetail: function(reportObj) {\n      let _ = this;\n      TableApi.OutWareHoustDetailReport({\n        reportId: reportObj[\"receipT_NO\"]\n      }).then(res => {\n        console.log(res);\n        _.seleTableObj = res.result;\n        _.showAddRecordModal();\n      });\n    },\n    deleReportData: function(reportId) {\n      let _ = this;\n      TableApi.DeleteTableRecord({\n        reportId: reportId\n      }).then(res => {\n        console.log(res);\n        if (res.success) {\n          _.$refs.table.tableObj.bootstrapTable(\"removeByUniqueId\", reportId);\n          layer.msg(\"删除成功\");\n        }\n      });\n    },\n    // 刷新表单\n    refershTable: function(params) {\n      this.$refs.table.tableOption.url =\n        config.pgyerApiUrl + TableApi.TableDataList.options.url;\n      this.$refs.table.tableOption.params = params;\n      this.$refs.table.operation(\"refresh\");\n    },\n    // 显示新建 & 编辑表单记录弹框\n    showAddRecordModal: function() {\n      let _ = this;\n      _.isEdit = true;\n      _.$nextTick(() => {\n        _.layerId = layer.open({\n          type: 1,\n          title: \"添加报告记录\",\n          maxmin: false,\n          area: [\"70%\", \"70%\"],\n          content: $(\"#pop\"),\n          end: function() {\n            _.isEdit = false;\n            _.seleTableObj = {};\n          }\n        });\n      });\n    }\n  },\n\n  components: { vTable, vSearch, vEditTable }\n};\n",{"version":3,"sources":["Table.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"Table.vue","sourceRoot":"src/views/TableModule/Table","sourcesContent":["<template>\n  <div>\n    <div class=\"box box-default\">\n      <div class=\"box-body box-body-resizer\">\n        <form class=\"form-inline\" id=\"search-query\">\n          <div class=\"search-bar\" style=\"float:left;width:99%;position: relative;\">\n            <vSearch\n              v-bind:dynamicControls=\"search_controls\"\n              v-bind:exportOptions=\"exportOptions\"\n              v-bind:searchOptions=\"searchOptions\"\n              v-bind:dynamicEdits=\"dynamicEdits\"\n              v-bind:dynamicEditObj=\"seleTableObj\"\n              v-bind:seleFunc=\"seleFunc\"\n              @callback=\"search\"\n              style=\"float:left\"\n            ></vSearch>\n          </div>\n        </form>\n\n        <vEditTable\n          v-if=\"isEdit\"\n          id=\"pop\"\n          :dynamicEdits=\"dynamicEdits\"\n          :seleTableObj=\"seleTableObj\"\n          @editCallback=\"editCallback\"\n        ></vEditTable>\n\n        <vTable ref=\"table\" :option=\"tableOption\" @tableEditBlock=\"tableEditBlock\" @tablePauseBlock=\"tablePauseBlock\"></vTable>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport vTable from \"@c/tables/table\";\nimport vSearch from \"@c/dynamicSearch/dynamic_Search\";\n\nimport vEditTable from \"@c/edit_table\";\n\nimport AreaApi from \"../../DictModule/webapi/AreaApi\";\nimport DataApi from \"../../DictModule/webapi/DataApi\";\nimport MatlApi from \"../../MatlModule/webapi/MaterialsApi\";\nimport TableApi from \"../webapi/TableApi\";\nimport moment from \"moment\";\nimport config from \"@/config/index\";\nimport { pageTool } from \"@/js/util.js\";\nexport default {\n  data() {\n    var _ = this;\n    return {\n      isEdit: false,\n      formData: {\n        No: \"\", //编号\n        Name: \"\", //名称\n        Code: \"\", //编码\n        MnenonicCode: \"\" //助记码\n      },\n      // 选择所需的功能按钮\n      // seleFunc: { add: true, export: true, search: true },\n      // 选择所需的功能按钮\n      // seleFunc: { add: true, export: true, search: true },\n      // 动态创建所需的功能按钮，添加 和 导出 功能已封装完善，默认显示\n      seleFunc: {\n        search: true,\n        export: true,\n        addFunList: [\n          {\n            title: \"添加\",\n            method: function() {\n              _.showAddRecordModal();\n            }\n          },\n          {\n            title: \"下载\",\n            method: function(e, item) {\n              console.log(\"下载被点击\");\n            }\n          }\n        ]\n      },\n      search_controls: [\n        {\n          type: \"v_text\",\n          title: \"发货单号1\",\n          key: \"receiptno\"\n        },\n        {\n          type: \"v_singleSelect\",\n          title: \"选择产品\",\n          key: \"materialsid\",\n          apiUrl: MatlApi.GetMaterialsList,\n          //params: { aaa: \"fff\" },\n          selectkey: \"productId\",\n          selectvalue: \"productName\"\n        },\n        {\n          type: \"v_datetime\",\n          title: \"发货开始日期\",\n          key: \"sendstartdate\"\n          //defdate: moment(new Date()).add(-1, 'months').format(\"YYYY-MM-DD\")\n        },\n        {\n          type: \"br\",\n          key: \"bra\"\n        },\n        {\n          type: \"v_doubleSelect\",\n          key: \"sendprovincecity\",\n          list: [\n            {\n              type: \"v_singleSelect\",\n              title: \"发货省份\",\n              key: \"sendprovince\",\n              apiUrl: AreaApi.GetAllProvinceList,\n              selectkey: \"provinceid\",\n              selectvalue: \"provincename\",\n              childrenkey: \"sendcity\"\n            },\n            {\n              type: \"v_singleSelect\",\n              title: \"发货城市\",\n              key: \"sendcity\",\n              apiUrl: AreaApi.GetCityOfProvinceList,\n              parendPostKey: \"AreaId\",\n              selectkey: \"cityid\",\n              selectvalue: \"cityname\"\n            }\n          ]\n        }\n      ],\n      // vEditTable 组件数据\n      dynamicEdits: {\n        // 保存数据API\n        apiUrl: TableApi.AddTableRecord,\n        list: [\n          {\n            // 每行显示编辑框数量类型   可选值  single、duoble\n            lineType: \"double\",\n            rowList: [\n              {\n                type: \"v_text\",\n                title: \"产品名称\",\n                key: \"materialS_NAME\", // 需对应后台返回字段名称\n                // 是否为必填选项\n                isRequest: true,\n                // 校验规则\n                validators: {\n                  notEmpty: {\n                    enabled: true,\n                    message: \"产品名称不能为空\"\n                  }\n                }\n              },\n              {\n                type: \"v_text\",\n                title: \"产品编码\",\n                key: \"materialS_SN\",\n                isRequest: false,\n                validators: {\n                  notEmpty: {\n                    enabled: false\n                  }\n                }\n              }\n            ]\n          },\n          {\n            lineType: \"double\",\n            rowList: [\n              {\n                type: \"v_text\",\n                title: \"产品名称11\",\n                key: \"productName\",\n                isRequest: true,\n                validators: {\n                  notEmpty: {\n                    enabled: true,\n                    message: \"产品名称不能为空\"\n                  }\n                }\n              },\n              {\n                type: \"v_text\",\n                title: \"产品编码11\",\n                key: \"deviceno\",\n                isRequest: false,\n                validators: {\n                  notEmpty: {\n                    enabled: false\n                  }\n                }\n              }\n            ]\n          },\n\n          {\n            lineType: \"double\",\n            rowList: [\n              {\n                type: \"v_text\",\n                title: \"发货单号\",\n                key: \"receipT_NO\",\n                isRequest: true,\n                validators: {\n                  notEmpty: {\n                    enabled: true,\n                    message: \"发货单号不能为空\"\n                  }\n                }\n              },\n              {\n                type: \"v_text\",\n                title: \"批次号\",\n                key: \"batchNo\",\n                isRequest: false,\n                validators: {\n                  notEmpty: {\n                    enabled: false\n                  }\n                }\n              }\n            ]\n          },\n          {\n            lineType: \"double\",\n            rowList: [\n              {\n                type: \"v_singleSelect\",\n                title: \"选择产品\",\n                key: \"materialsid\",\n                apiUrl: MatlApi.GetMaterialsList,\n                //params: { aaa: \"fff\" },\n                selectkey: \"productId\",\n                selectvalue: \"productName\",\n                isRequest: true,\n                validators: {\n                  notEmpty: {\n                    enabled: true\n                  }\n                }\n              },\n              {\n                lineType: \"single\",\n                type: \"v_datetime\",\n                title: \"发货日期\",\n                key: \"receipT_DATE\",\n                isRequest: true,\n                validators: {\n                  notEmpty: {\n                    enabled: true\n                  }\n                }\n                //defdate: moment(new Date()).add(-1, 'months').format(\"YYYY-MM-DD\")\n              }\n            ]\n          },\n          {\n            lineType: \"single\",\n            rowList: [\n              {\n                type: \"v_doubleSelect\",\n                key: \"sendprovincecity\",\n                isRequest: true,\n                list: [\n                  {\n                    type: \"v_singleSelect\",\n                    title: \"发货省份\",\n                    key: \"sendprovince\",\n                    apiUrl: AreaApi.GetAllProvinceList,\n                    selectkey: \"provinceid\",\n                    selectvalue: \"provincename\",\n                    childrenkey: \"sendcity\",\n                    isRequest: false,\n                    validators: {\n                      notEmpty: {\n                        enabled: true\n                      }\n                    }\n                  },\n                  {\n                    type: \"v_singleSelect\",\n                    title: \"发货城市\",\n                    key: \"sendcity\",\n                    apiUrl: AreaApi.GetCityOfProvinceList,\n                    parendPostKey: \"AreaId\",\n                    selectkey: \"cityid\",\n                    selectvalue: \"cityname\",\n                    isRequest: true,\n                    validators: {\n                      notEmpty: {\n                        enabled: true\n                      }\n                    }\n                  }\n                ]\n              }\n            ]\n          }\n        ]\n      },\n      seleTableObj: {}, // 选中的表单行数据\n\n      searchOptions: {\n        requiredCondition: true\n      },\n      tableOption: {\n        tableId: \"sendreport\",\n        tableName: \"发货统计报表\",\n        url: config.pgyerApiUrl + TableApi.TableDataList.options.url,\n        method: TableApi.TableDataList.options.method,\n        uniqueId: \"receipT_NO\",\n        actions: [\n          {\n            key: 'tableEdit',\n            title: \"编辑\",\n            url: config.pgyerApiUrl + TableApi.TableDataList.options.url,\n            method: TableApi.TableDataList.options.method\n          },\n          {\n            key: 'tablePause',\n            title: \"禁用\",\n            url: config.pgyerApiUrl + TableApi.TableDataList.options.url,\n            method: TableApi.TableDataList.options.method\n          }\n        ],\n        columns: [\n          {\n            field: \"materialS_NAME\",\n            title: \"产品名称\",\n            align: \"left\",\n            width: \"150px\"\n          },\n          { field: \"receipT_NO\", title: \"发货单号\", align: \"center\" },\n          { field: \"sendProvince\", title: \"发货省\", align: \"center\" },\n          { field: \"sendCity\", title: \"发货城市\", align: \"center\" },\n          { field: \"receipT_SENDER\", title: \"发货单位\", align: \"center\" },\n          {\n            field: \"receipT_DATE\",\n            title: \"发货日期\",\n            align: \"center\",\n            formatter: function(val, row) {\n              return moment(val).format(\"YYYY-MM-DD HH:mm:ss\");\n            }\n          }\n        ]\n      }\n    };\n  },\n  computed: {\n    exportOptions: function() {\n      return {\n        id: this.tableOption.tableId,\n        name: this.tableOption.tableName,\n        url: TableApi.TableDataList\n      };\n    }\n  },\n  mounted: function() {\n  },\n  methods: {\n    // 表格回调事件名规则   传入的按钮 key + Block\n    // 编辑按钮回调事件\n    tableEditBlock: function(rowId) {\n      let obj = this.$refs.table.tableObj.bootstrapTable(\n        \"getRowByUniqueId\",\n        rowId\n      );\n      this.getSeleReportDataDetail(obj);\n      // console.log(obj);\n    },\n    // 禁用按钮回调事件\n    tablePauseBlock: function(rowId) {\n      let obj = this.$refs.table.tableObj.bootstrapTable(\n        \"getRowByUniqueId\",\n        rowId\n      );\n      this.deleReportData(rowId);\n    },\n    // 动态搜索回调\n    search: function(params) {\n      this.refershTable(params);\n    },\n    // 新建 & 编辑表单记录完成后的回调事件\n    editCallback: function(type, params) {\n      // type = add   type = edit\n      this.refershTable(params);\n    },\n    getSeleReportDataDetail: function(reportObj) {\n      let _ = this;\n      TableApi.OutWareHoustDetailReport({\n        reportId: reportObj[\"receipT_NO\"]\n      }).then(res => {\n        console.log(res);\n        _.seleTableObj = res.result;\n        _.showAddRecordModal();\n      });\n    },\n    deleReportData: function(reportId) {\n      let _ = this;\n      TableApi.DeleteTableRecord({\n        reportId: reportId\n      }).then(res => {\n        console.log(res);\n        if (res.success) {\n          _.$refs.table.tableObj.bootstrapTable(\"removeByUniqueId\", reportId);\n          layer.msg(\"删除成功\");\n        }\n      });\n    },\n    // 刷新表单\n    refershTable: function(params) {\n      this.$refs.table.tableOption.url =\n        config.pgyerApiUrl + TableApi.TableDataList.options.url;\n      this.$refs.table.tableOption.params = params;\n      this.$refs.table.operation(\"refresh\");\n    },\n    // 显示新建 & 编辑表单记录弹框\n    showAddRecordModal: function() {\n      let _ = this;\n      _.isEdit = true;\n      _.$nextTick(() => {\n        _.layerId = layer.open({\n          type: 1,\n          title: \"添加报告记录\",\n          maxmin: false,\n          area: [\"70%\", \"70%\"],\n          content: $(\"#pop\"),\n          end: function() {\n            _.isEdit = false;\n            _.seleTableObj = {};\n          }\n        });\n      });\n    }\n  },\n\n  components: { vTable, vSearch, vEditTable }\n};\n</script>\n<style>\n.datetimepicker {\n  z-index: 21212121 !important;\n}\n</style>\n\n"]}]}