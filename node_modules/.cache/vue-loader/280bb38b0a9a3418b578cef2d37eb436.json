{"remainingRequest":"/Users/hq_failmy/Desktop/封装控件0422/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hq_failmy/Desktop/封装控件0422/src/components/dynamicSearch/upload/upload.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hq_failmy/Desktop/封装控件0422/src/components/dynamicSearch/upload/upload.vue","mtime":1556017181884},{"path":"/Users/hq_failmy/Desktop/封装控件0422/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hq_failmy/Desktop/封装控件0422/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hq_failmy/Desktop/封装控件0422/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hq_failmy/Desktop/封装控件0422/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n  data() {\n    return {\n      val: \"\",\n      isDisabled: false,\n      seleList: [],\n      fileSize: 0,\n      filepath: ''\n    };\n  },\n  watch: {\n    val(val) {\n      debugger;\n      this.options.hasValChange && this.$emit(\"componentValueChange\", this);\n    }\n  },\n  props: [\"options\"],\n  beforeMount() {\n    this.options.hasMountBefore && this.$emit(\"componentMountBefore\", this);\n    if (this.options.fileSizeLimit) {\n      this.fileSize = this.options.fileSizeLimit * 1024 * 1024;\n    } else {\n      this.fileSize = 3 * 1024 * 1024;\n    }\n  },\n  mounted() {\n    this.$emit(\"componentMountAfter\", this);\n  },\n  methods: {\n    setValue: function(val) {\n      let _ = this;\n      if (typeof val == \"string\") {\n        this.val = val;\n        this.seleList.push(val);\n      } else {\n        val = val || '';\n        this.seleList == val.split('##');\n        this.handleVal();\n      }\n    },\n    getValue: function() {\n      return this.val;\n    },\n    deleteSelect: function(element) {\n      this.seleList.splice(element.currentTarget.id, 1);\n    },\n    showTip: function() {\n      layer.tips(\"图片建议尺寸200*200，可等比缩放，文件大小不超过3MB\", \"#tip\");\n    },\n    filechange: function() {\n      var _ = this;\n      if (_.seleList.length == _.options.uploadNum) {\n        return layer.alert(\"只能上传\" + _.options.uploadNum + \"张图片\");\n      }\n      var element = _.$refs.file;\n      var file_path = element.value;\n      var fileObj = element.files[0];\n      if (fileObj != null) {\n        if (fileObj.size > _.fileSize) {\n          return layer.alert(\n            _.options.fileSizeLimit\n              ? \"所选的文件超过\" + _.options.fileSizeLimit + \"MB!\"\n              : \"所选的文件超过3MB！\"\n          );\n        }\n\n        var reader = new FileReader();\n        reader.readAsDataURL(fileObj);\n        reader.onload = function() {\n          _.seleList.push(reader.result);\n          _.handleVal();\n          _.filepath = '';\n          debugger;\n          console.log(_.val);\n        };\n      } else {\n          _.filepath = '';\n      }\n    },\n    handleVal: function() {\n      let _ = this;\n      this.seleList.map(item => {\n        _.val += item + \"##\";\n      });\n      if (this.seleList.length) {\n        _.val = _.val.substr(0, _.val.length - 2);\n      } else {\n        _.val = \"\";\n      }\n    }\n  }\n};\n",{"version":3,"sources":["upload.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"upload.vue","sourceRoot":"src/components/dynamicSearch/upload","sourcesContent":["<template>\n  <div class=\"form-group upload-view\">\n    <div class=\"file-box\">\n      <div class=\"file-item\" v-for=\"(item, index) in seleList\" :key=\"index\">\n        <!-- <img src=\"../../../assets/images/upload.png\" alt> -->\n        <img :src=\"item\" alt>\n        <i class=\"glyphicon glyphicon-remove\" @click=\"deleteSelect\" :id=\"index\"></i>\n      </div>\n    </div>\n    <div class=\"upload-box\">\n      <img src=\"../../../assets/images/upload.png\" class=\"addImg\">\n      <input\n        ref=\"file\"\n        class=\"form-control\"\n        type=\"text\"\n        v-model=\"val\"\n        :name=\"options.key\"\n        @change=\"filechange\"\n        accept=\".png, .jpg, .jpeg\"\n        disabled=\"true\"\n      >\n      <input\n        ref=\"file\"\n        type=\"file\"\n        :value=\"filepath\"\n        :name=\"options.key\"\n        autocomplete=\"off\"\n        @change=\"filechange\"\n        accept=\".png, .jpg, .jpeg\"\n      >\n      <i\n        id=\"tip\"\n        class=\"fa fa-question-circle-o text-success\"\n        data-toggle=\"tooltip\"\n        data-placement=\"right\"\n        title\n        style=\"margin: 40px 0 0 10px;font-size: 16px;\"\n        @mouseover=\"showTip\"\n        @mouseup=\"showTip\"\n      ></i>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      val: \"\",\n      isDisabled: false,\n      seleList: [],\n      fileSize: 0,\n      filepath: ''\n    };\n  },\n  watch: {\n    val(val) {\n      debugger;\n      this.options.hasValChange && this.$emit(\"componentValueChange\", this);\n    }\n  },\n  props: [\"options\"],\n  beforeMount() {\n    this.options.hasMountBefore && this.$emit(\"componentMountBefore\", this);\n    if (this.options.fileSizeLimit) {\n      this.fileSize = this.options.fileSizeLimit * 1024 * 1024;\n    } else {\n      this.fileSize = 3 * 1024 * 1024;\n    }\n  },\n  mounted() {\n    this.$emit(\"componentMountAfter\", this);\n  },\n  methods: {\n    setValue: function(val) {\n      let _ = this;\n      if (typeof val == \"string\") {\n        this.val = val;\n        this.seleList.push(val);\n      } else {\n        val = val || '';\n        this.seleList == val.split('##');\n        this.handleVal();\n      }\n    },\n    getValue: function() {\n      return this.val;\n    },\n    deleteSelect: function(element) {\n      this.seleList.splice(element.currentTarget.id, 1);\n    },\n    showTip: function() {\n      layer.tips(\"图片建议尺寸200*200，可等比缩放，文件大小不超过3MB\", \"#tip\");\n    },\n    filechange: function() {\n      var _ = this;\n      if (_.seleList.length == _.options.uploadNum) {\n        return layer.alert(\"只能上传\" + _.options.uploadNum + \"张图片\");\n      }\n      var element = _.$refs.file;\n      var file_path = element.value;\n      var fileObj = element.files[0];\n      if (fileObj != null) {\n        if (fileObj.size > _.fileSize) {\n          return layer.alert(\n            _.options.fileSizeLimit\n              ? \"所选的文件超过\" + _.options.fileSizeLimit + \"MB!\"\n              : \"所选的文件超过3MB！\"\n          );\n        }\n\n        var reader = new FileReader();\n        reader.readAsDataURL(fileObj);\n        reader.onload = function() {\n          _.seleList.push(reader.result);\n          _.handleVal();\n          _.filepath = '';\n          debugger;\n          console.log(_.val);\n        };\n      } else {\n          _.filepath = '';\n      }\n    },\n    handleVal: function() {\n      let _ = this;\n      this.seleList.map(item => {\n        _.val += item + \"##\";\n      });\n      if (this.seleList.length) {\n        _.val = _.val.substr(0, _.val.length - 2);\n      } else {\n        _.val = \"\";\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n.upload-view {\n  position: relative;\n  width: 100%;\n  height: 100px;\n  display: inline-block;\n}\n.file-box {\n  height: 70px;\n  position: relative;\n  display: inline-block;\n}\n.file-item {\n  position: relative;\n  margin-right: 20px;\n  float: left;\n  margin-top: 28px;\n}\n.file-box img {\n  display: inline-flex;\n  width: 70px;\n  height: 70px;\n}\n.file-box i {\n  position: absolute;\n  right: -13px;\n  top: -13px;\n  color: red;\n  font-size: 16px;\n  padding: 10px;\n}\n.upload-box {\n  position: relative;\n  display: inline-block;\n}\n.upload-box img {\n  width: 70px;\n  height: 70px;\n}\n.upload-box input {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 70px;\n  height: 70px;\n  opacity: 0;\n}\n/* .upload-view {\n  position: relative;\n  display: flex;\n  width: 100%;\n  height: 100px;\n  border: 1px solid #c3c3c3;\n  align-items: center;\n}\n.file-box {\n  height: 70px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: relative;\n}\n.file-item {\n  position: relative;\n  margin-right: 20px;\n}\n.file-box img {\n  display: inline-flex;\n  width: 70px;\n  height: 70px;\n}\n.file-box i {\n  position: absolute;\n  right: -13px;\n  top: -13px;\n  color: red;\n  font-size: 16px;\n  padding: 10px;\n}\n.upload-box {\n  position: relative;\n}\n.upload-box img {\n  width: 70px;\n  height: 70px;\n}\n.upload-box input {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 70px;\n  height: 70px;\n  opacity: 0;\n} */\n</style>"]}]}