{"remainingRequest":"/Users/hq_failmy/Desktop/前端代码0405/node_modules/babel-loader/lib/index.js!/Users/hq_failmy/Desktop/前端代码0405/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/hq_failmy/Desktop/前端代码0405/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hq_failmy/Desktop/前端代码0405/src/views/TableModule/Table/Custom.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hq_failmy/Desktop/前端代码0405/src/views/TableModule/Table/Custom.vue","mtime":1554195165139},{"path":"/Users/hq_failmy/Desktop/前端代码0405/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hq_failmy/Desktop/前端代码0405/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hq_failmy/Desktop/前端代码0405/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hq_failmy/Desktop/前端代码0405/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport vTable from \"@c/tables/table\";\nimport vSearch from \"@c/dynamicSearch/dynamic_Search\";\nimport vEditTable from \"@c/edit_table\";\nimport AreaApi from \"../../DictModule/webapi/AreaApi\";\nimport DataApi from \"../../DictModule/webapi/DataApi\";\nimport MatlApi from \"../../MatlModule/webapi/MaterialsApi\";\nimport TableApi from \"../webapi/TableApi\";\nimport moment from \"moment\";\nimport config from \"@/config/index\";\nimport { pageTool } from \"@/js/util.js\";\nexport default {\n  data: function data() {\n    var _ = this;\n\n    return {\n      isEdit: false,\n      formData: {\n        No: \"\",\n        //编号\n        Name: \"\",\n        //名称\n        Code: \"\",\n        //编码\n        MnenonicCode: \"\" //助记码\n\n      },\n      // 选择所需的功能按钮\n      // seleFunc: { add: true, export: true, search: true },\n      // 选择所需的功能按钮\n      // seleFunc: { add: true, export: true, search: true },\n      // 动态创建所需的功能按钮，添加 和 导出 功能已封装完善，默认显示\n      seleFunc: {\n        search: true,\n        export: false,\n        addFunList: [{\n          title: \"自定义\",\n          iconStr: 'fa-pause',\n          method: function method() {\n            _.showAddRecordModal();\n          }\n        }, {\n          title: \"下载\",\n          method: function method(e, item) {\n            console.log(\"下载被点击\");\n          }\n        }]\n      },\n      search_controls: [{\n        type: \"v_text\",\n        title: \"发货单号1\",\n        key: \"receiptno\"\n      }, {\n        type: \"v_singleSelect\",\n        title: \"选择产品\",\n        key: \"materialsid\",\n        apiUrl: MatlApi.GetMaterialsList,\n        //params: { aaa: \"fff\" },\n        selectkey: \"productId\",\n        selectvalue: \"productName\"\n      }, {\n        type: \"v_singleSelect\",\n        title: \"自定义下拉选择\",\n        key: \"custom11\",\n        data: [{\n          typeid: '',\n          typename: '自定义下拉选择'\n        }, {\n          typeid: '3232',\n          typename: '自定义选项一'\n        }, {\n          typeid: '3435',\n          typename: '自定义选项二'\n        }, {\n          typeid: '3639',\n          typename: '自定义选项三'\n        }],\n        selectkey: \"typeid\",\n        selectvalue: \"typename\"\n      }, {\n        type: \"v_singleSelect\",\n        title: \"自定义下拉选择\",\n        key: \"custom\",\n        data: [{\n          id: '',\n          value: '自定义下拉选择'\n        }, {\n          id: '3232',\n          value: '自定义选项一'\n        }, {\n          id: '3435',\n          value: '自定义选项二'\n        }, {\n          id: '3639',\n          value: '自定义选项三'\n        }],\n        selectkey: \"id\",\n        selectvalue: \"value\"\n      }, {\n        type: \"v_datetime\",\n        title: \"发货开始日期\",\n        key: \"sendstartdate\" //defdate: moment(new Date()).add(-1, 'months').format(\"YYYY-MM-DD\")\n\n      }, {\n        type: \"v_datetime\",\n        title: \"发货截止日期\",\n        key: \"sendstopdate\" //defdate: moment(new Date()).add(-1, 'months').format(\"YYYY-MM-DD\")\n\n      }, {\n        type: \"br\",\n        key: \"bra\"\n      }, {\n        type: \"v_doubleSelect\",\n        key: \"sendprovincecity\",\n        list: [{\n          type: \"v_singleSelect\",\n          title: \"发货省份\",\n          key: \"sendprovince\",\n          apiUrl: AreaApi.GetAllProvinceList,\n          selectkey: \"provinceid\",\n          selectvalue: \"provincename\",\n          childrenkey: \"sendcity\"\n        }, {\n          type: \"v_singleSelect\",\n          title: \"发货城市\",\n          key: \"sendcity\",\n          apiUrl: AreaApi.GetCityOfProvinceList,\n          parendPostKey: \"AreaId\",\n          selectkey: \"cityid\",\n          selectvalue: \"cityname\"\n        }]\n      }],\n      // vEditTable 组件数据\n      dynamicEdits: {\n        // 保存数据API\n        apiUrl: TableApi.AddTableRecord,\n        list: [{\n          // 每行显示编辑框数量类型   可选值  single、duoble\n          lineType: \"double\",\n          rowList: [{\n            type: \"v_text\",\n            title: \"产品名称\",\n            key: \"materialS_NAME\",\n            // 需对应后台返回字段名称\n            // 是否为必填选项\n            isRequest: true,\n            // 校验规则\n            validators: {\n              notEmpty: {\n                enabled: true,\n                message: \"产品名称不能为空\"\n              }\n            }\n          }, {\n            type: \"v_text\",\n            title: \"产品编码\",\n            key: \"materialS_SN\",\n            isRequest: false,\n            validators: {\n              notEmpty: {\n                enabled: false\n              }\n            }\n          }, {\n            type: \"v_text\",\n            title: \"发货单号\",\n            key: \"receipT_NO\",\n            isRequest: true,\n            validators: {\n              notEmpty: {\n                enabled: true,\n                message: \"发货单号不能为空\"\n              }\n            }\n          }, {\n            type: \"v_text\",\n            title: \"批次号\",\n            key: \"batchNo\",\n            isRequest: false,\n            validators: {\n              notEmpty: {\n                enabled: false\n              }\n            }\n          }, {\n            type: \"v_singleSelect\",\n            title: \"选择产品\",\n            key: \"materialsid\",\n            apiUrl: MatlApi.GetMaterialsList,\n            //params: { aaa: \"fff\" },\n            selectkey: \"productId\",\n            selectvalue: \"productName\",\n            isRequest: true,\n            validators: {\n              notEmpty: {\n                enabled: true\n              }\n            }\n          }]\n        }, {\n          lineType: \"single\",\n          rowList: [{\n            type: \"v_text\",\n            title: \"产品编码\",\n            key: \"materialS_SN\",\n            isRequest: false,\n            validators: {\n              notEmpty: {\n                enabled: false\n              }\n            }\n          }, {\n            type: \"v_datetime\",\n            title: \"发货日期\",\n            key: \"receipT_DATE\",\n            isRequest: true,\n            validators: {\n              notEmpty: {\n                enabled: true\n              } //defdate: moment(new Date()).add(-1, 'months').format(\"YYYY-MM-DD\")\n\n            }\n          }]\n        }, {\n          lineType: \"single\",\n          rowList: [{\n            type: \"v_doubleSelect\",\n            key: \"sendprovincecity\",\n            isRequest: true,\n            list: [{\n              type: \"v_singleSelect\",\n              title: \"发货省份\",\n              key: \"sendprovince\",\n              apiUrl: AreaApi.GetAllProvinceList,\n              selectkey: \"provinceid\",\n              selectvalue: \"provincename\",\n              childrenkey: \"sendcity\",\n              isRequest: false,\n              validators: {\n                notEmpty: {\n                  enabled: true\n                }\n              }\n            }, {\n              type: \"v_singleSelect\",\n              title: \"发货城市\",\n              key: \"sendcity\",\n              apiUrl: AreaApi.GetCityOfProvinceList,\n              parendPostKey: \"AreaId\",\n              selectkey: \"cityid\",\n              selectvalue: \"cityname\",\n              isRequest: true,\n              validators: {\n                notEmpty: {\n                  enabled: true\n                }\n              }\n            }]\n          }]\n        }]\n      },\n      seleTableObj: {},\n      // 选中的表单行数据\n      searchOptions: {\n        requiredCondition: true\n      },\n      tableOption: {\n        tableId: \"sendreport\",\n        tableName: \"发货统计报表\",\n        url: config.pgyerApiUrl + TableApi.TableDataList.options.url,\n        method: TableApi.TableDataList.options.method,\n        uniqueId: \"receipT_NO\",\n        actions: [{\n          key: 'tableEdit',\n          title: \"编辑\",\n          buttonType: \"btn-danger\"\n        }, {\n          key: 'tableDetail',\n          title: \"详情\",\n          buttonType: \"btn-info\"\n        }, {\n          key: 'tablePause',\n          title: \"禁用\"\n        }],\n        columns: [{\n          field: \"materialS_NAME\",\n          title: \"产品名称\",\n          align: \"left\",\n          width: \"150px\",\n          cellStyle: function cellStyle(value, row, index) {\n            // 设置超过行宽以省略号显示\n            return {\n              css: {\n                \"overflow\": \"hidden\",\n                \"text-overflow\": \"ellipsis\",\n                \"white-space\": \"nowrap\",\n                \"display\": \"inline-block\"\n              }\n            };\n          }\n        }, {\n          field: \"receipT_NO\",\n          title: \"发货单号\",\n          align: \"center\"\n        }, {\n          field: \"sendProvince\",\n          title: \"发货省\",\n          align: \"center\"\n        }, {\n          field: \"sendCity\",\n          title: \"发货城市\",\n          align: \"center\"\n        }, {\n          field: \"receipT_SENDER\",\n          title: \"发货单位\",\n          align: \"center\"\n        }, {\n          field: \"receipT_DATE\",\n          title: \"发货日期\",\n          align: \"center\",\n          formatter: function formatter(val, row) {\n            return moment(val).format(\"YYYY-MM-DD HH:mm:ss\");\n          }\n        }]\n      }\n    };\n  },\n  computed: {\n    exportOptions: function exportOptions() {\n      return {\n        id: this.tableOption.tableId,\n        name: this.tableOption.tableName,\n        url: TableApi.TableDataList\n      };\n    }\n  },\n  mounted: function mounted() {},\n  methods: {\n    // 表格回调事件名规则   传入的按钮 key + Block\n    // 编辑按钮回调事件\n    tableEditBlock: function tableEditBlock(rowId) {\n      var obj = this.$refs.table.tableObj.bootstrapTable(\"getRowByUniqueId\", rowId);\n      this.getSeleReportDataDetail(obj); // console.log(obj);\n    },\n    // 禁用按钮回调事件\n    tablePauseBlock: function tablePauseBlock(rowId) {\n      var obj = this.$refs.table.tableObj.bootstrapTable(\"getRowByUniqueId\", rowId);\n      this.deleReportData(rowId);\n    },\n    tableDetailBlock: function tableDetailBlock() {\n      console.log('详情按钮被点击');\n    },\n    // 动态搜索回调\n    search: function search(params) {\n      this.refershTable(params);\n    },\n    // 新建 & 编辑表单记录完成后的回调事件\n    editCallback: function editCallback(type, params) {\n      // type = add   type = edit\n      this.refershTable(params);\n    },\n    getSeleReportDataDetail: function getSeleReportDataDetail(reportObj) {\n      var _ = this;\n\n      TableApi.OutWareHoustDetailReport({\n        reportId: reportObj[\"receipT_NO\"]\n      }).then(function (res) {\n        console.log(res);\n        _.seleTableObj = res.result;\n\n        _.showAddRecordModal();\n      });\n    },\n    deleReportData: function deleReportData(reportId) {\n      var _ = this;\n\n      TableApi.DeleteTableRecord({\n        reportId: reportId\n      }).then(function (res) {\n        console.log(res);\n\n        if (res.success) {\n          _.$refs.table.tableObj.bootstrapTable(\"removeByUniqueId\", reportId);\n\n          layer.msg(\"删除成功\");\n        }\n      });\n    },\n    // 刷新表单\n    refershTable: function refershTable(params) {\n      this.$refs.table.tableOption.url = config.pgyerApiUrl + TableApi.TableDataList.options.url;\n      this.$refs.table.tableOption.params = params;\n      this.$refs.table.operation(\"refresh\");\n    },\n    // 显示新建 & 编辑表单记录弹框\n    showAddRecordModal: function showAddRecordModal() {\n      var _ = this;\n\n      _.isEdit = true;\n\n      _.$nextTick(function () {\n        _.layerId = layer.open({\n          type: 1,\n          title: \"添加报告记录\",\n          maxmin: false,\n          area: [\"70%\", \"70%\"],\n          content: $(\"#pop\"),\n          end: function end() {\n            _.isEdit = false;\n            _.seleTableObj = {};\n          }\n        });\n      });\n    }\n  },\n  components: {\n    vTable: vTable,\n    vSearch: vSearch,\n    vEditTable: vEditTable\n  }\n};",{"version":3,"sources":["Custom.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <div class=\"box box-default\">\n      <div class=\"box-body box-body-resizer\">\n        <form class=\"form-inline\" id=\"search-query\">\n          <div class=\"search-bar\" style=\"float:left;width:99%;position: relative;\">\n            <vSearch\n              v-bind:dynamicControls=\"search_controls\"\n              v-bind:exportOptions=\"exportOptions\"\n              v-bind:searchOptions=\"searchOptions\"\n              v-bind:dynamicEdits=\"dynamicEdits\"\n              v-bind:dynamicEditObj=\"seleTableObj\"\n              v-bind:seleFunc=\"seleFunc\"\n              @callback=\"search\"\n              style=\"float:left\"\n            ></vSearch>\n          </div>\n        </form>\n\n        <vEditTable\n          v-if=\"isEdit\"\n          id=\"pop\"\n          :dynamicEdits=\"dynamicEdits\"\n          :seleTableObj=\"seleTableObj\"\n          @editCallback=\"editCallback\"\n        ></vEditTable>\n\n        <vTable ref=\"table\" :option=\"tableOption\" @tableEditBlock=\"tableEditBlock\" @tablePauseBlock=\"tablePauseBlock\" @tableDetailBlock=\"tableDetailBlock\"></vTable>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport vTable from \"@c/tables/table\";\nimport vSearch from \"@c/dynamicSearch/dynamic_Search\";\n\nimport vEditTable from \"@c/edit_table\";\n\nimport AreaApi from \"../../DictModule/webapi/AreaApi\";\nimport DataApi from \"../../DictModule/webapi/DataApi\";\nimport MatlApi from \"../../MatlModule/webapi/MaterialsApi\";\nimport TableApi from \"../webapi/TableApi\";\nimport moment from \"moment\";\nimport config from \"@/config/index\";\nimport { pageTool } from \"@/js/util.js\";\nexport default {\n  data() {\n    var _ = this;\n    return {\n      isEdit: false,\n      formData: {\n        No: \"\", //编号\n        Name: \"\", //名称\n        Code: \"\", //编码\n        MnenonicCode: \"\" //助记码\n      },\n      // 选择所需的功能按钮\n      // seleFunc: { add: true, export: true, search: true },\n      // 选择所需的功能按钮\n      // seleFunc: { add: true, export: true, search: true },\n      // 动态创建所需的功能按钮，添加 和 导出 功能已封装完善，默认显示\n      seleFunc: {\n        search: true,\n        export: false,\n        addFunList: [\n          {\n            title: \"自定义\",\n            iconStr: 'fa-pause',\n            method: function() {\n              _.showAddRecordModal();\n            }\n          },\n          {\n            title: \"下载\",\n            method: function(e, item) {\n              console.log(\"下载被点击\");\n            }\n          }\n        ]\n      },\n      search_controls: [\n        {\n          type: \"v_text\",\n          title: \"发货单号1\",\n          key: \"receiptno\"\n        },\n        {\n          type: \"v_singleSelect\",\n          title: \"选择产品\",\n          key: \"materialsid\",\n          apiUrl: MatlApi.GetMaterialsList,\n          //params: { aaa: \"fff\" },\n          selectkey: \"productId\",\n          selectvalue: \"productName\"\n        },\n        {\n          type: \"v_singleSelect\",\n          title: \"自定义下拉选择\",\n          key: \"custom11\",\n          data: [\n              {\n                  typeid: '',\n                  typename: '自定义下拉选择'\n              },\n              {\n                  typeid: '3232',\n                  typename: '自定义选项一'\n              },\n              {\n                  typeid: '3435',\n                  typename: '自定义选项二'\n              },\n              {\n                  typeid: '3639',\n                  typename: '自定义选项三'\n              }\n\n          ],\n          selectkey: \"typeid\",\n          selectvalue: \"typename\"\n        },\n        {\n          type: \"v_singleSelect\",\n          title: \"自定义下拉选择\",\n          key: \"custom\",\n          data: [\n              {\n                  id: '',\n                  value: '自定义下拉选择'\n              },\n              {\n                  id: '3232',\n                  value: '自定义选项一'\n              },\n              {\n                  id: '3435',\n                  value: '自定义选项二'\n              },\n              {\n                  id: '3639',\n                  value: '自定义选项三'\n              }\n\n          ],\n          selectkey: \"id\",\n          selectvalue: \"value\"\n        },\n        {\n          type: \"v_datetime\",\n          title: \"发货开始日期\",\n          key: \"sendstartdate\"\n          //defdate: moment(new Date()).add(-1, 'months').format(\"YYYY-MM-DD\")\n        },\n        {\n          type: \"v_datetime\",\n          title: \"发货截止日期\",\n          key: \"sendstopdate\"\n          //defdate: moment(new Date()).add(-1, 'months').format(\"YYYY-MM-DD\")\n        },\n        {\n          type: \"br\",\n          key: \"bra\"\n        },\n        {\n          type: \"v_doubleSelect\",\n          key: \"sendprovincecity\",\n          list: [\n            {\n              type: \"v_singleSelect\",\n              title: \"发货省份\",\n              key: \"sendprovince\",\n              apiUrl: AreaApi.GetAllProvinceList,\n              selectkey: \"provinceid\",\n              selectvalue: \"provincename\",\n              childrenkey: \"sendcity\"\n            },\n            {\n              type: \"v_singleSelect\",\n              title: \"发货城市\",\n              key: \"sendcity\",\n              apiUrl: AreaApi.GetCityOfProvinceList,\n              parendPostKey: \"AreaId\",\n              selectkey: \"cityid\",\n              selectvalue: \"cityname\"\n            }\n          ]\n        }\n      ],\n      // vEditTable 组件数据\n      dynamicEdits: {\n        // 保存数据API\n        apiUrl: TableApi.AddTableRecord,\n        list: [\n          {\n            // 每行显示编辑框数量类型   可选值  single、duoble\n            lineType: \"double\",\n            rowList: [\n              {\n                type: \"v_text\",\n                title: \"产品名称\",\n                key: \"materialS_NAME\", // 需对应后台返回字段名称\n                // 是否为必填选项\n                isRequest: true,\n                // 校验规则\n                validators: {\n                  notEmpty: {\n                    enabled: true,\n                    message: \"产品名称不能为空\"\n                  }\n                }\n              },\n              {\n                type: \"v_text\",\n                title: \"产品编码\",\n                key: \"materialS_SN\",\n                isRequest: false,\n                validators: {\n                  notEmpty: {\n                    enabled: false\n                  }\n                }\n              },\n              {\n                type: \"v_text\",\n                title: \"发货单号\",\n                key: \"receipT_NO\",\n                isRequest: true,\n                validators: {\n                  notEmpty: {\n                    enabled: true,\n                    message: \"发货单号不能为空\"\n                  }\n                }\n              },\n              {\n                type: \"v_text\",\n                title: \"批次号\",\n                key: \"batchNo\",\n                isRequest: false,\n                validators: {\n                  notEmpty: {\n                    enabled: false\n                  }\n                }\n              },\n              {\n                type: \"v_singleSelect\",\n                title: \"选择产品\",\n                key: \"materialsid\",\n                apiUrl: MatlApi.GetMaterialsList,\n                //params: { aaa: \"fff\" },\n                selectkey: \"productId\",\n                selectvalue: \"productName\",\n                isRequest: true,\n                validators: {\n                  notEmpty: {\n                    enabled: true\n                  }\n                }\n              },\n            ]\n          },\n          {\n            lineType: \"single\",\n            rowList: [\n              {\n                type: \"v_text\",\n                title: \"产品编码\",\n                key: \"materialS_SN\",\n                isRequest: false,\n                validators: {\n                  notEmpty: {\n                    enabled: false\n                  }\n                }\n              },\n              {\n                type: \"v_datetime\",\n                title: \"发货日期\",\n                key: \"receipT_DATE\",\n                isRequest: true,\n                validators: {\n                  notEmpty: {\n                    enabled: true\n                  }\n                }\n                //defdate: moment(new Date()).add(-1, 'months').format(\"YYYY-MM-DD\")\n              }\n            ]\n          },\n          {\n            lineType: \"single\",\n            rowList: [\n              {\n                type: \"v_doubleSelect\",\n                key: \"sendprovincecity\",\n                isRequest: true,\n                list: [\n                  {\n                    type: \"v_singleSelect\",\n                    title: \"发货省份\",\n                    key: \"sendprovince\",\n                    apiUrl: AreaApi.GetAllProvinceList,\n                    selectkey: \"provinceid\",\n                    selectvalue: \"provincename\",\n                    childrenkey: \"sendcity\",\n                    isRequest: false,\n                    validators: {\n                      notEmpty: {\n                        enabled: true\n                      }\n                    }\n                  },\n                  {\n                    type: \"v_singleSelect\",\n                    title: \"发货城市\",\n                    key: \"sendcity\",\n                    apiUrl: AreaApi.GetCityOfProvinceList,\n                    parendPostKey: \"AreaId\",\n                    selectkey: \"cityid\",\n                    selectvalue: \"cityname\",\n                    isRequest: true,\n                    validators: {\n                      notEmpty: {\n                        enabled: true\n                      }\n                    }\n                  }\n                ]\n              }\n            ]\n          }\n        ]\n      },\n      seleTableObj: {}, // 选中的表单行数据\n\n      searchOptions: {\n        requiredCondition: true\n      },\n      tableOption: {\n        tableId: \"sendreport\",\n        tableName: \"发货统计报表\",\n        url: config.pgyerApiUrl + TableApi.TableDataList.options.url,\n        method: TableApi.TableDataList.options.method,\n        uniqueId: \"receipT_NO\",\n        actions: [\n          {\n            key: 'tableEdit',\n            title: \"编辑\",\n            buttonType: \"btn-danger\"\n          },\n          {\n            key: 'tableDetail',\n            title: \"详情\",\n            buttonType: \"btn-info\"\n          },\n          {\n            key: 'tablePause',\n            title: \"禁用\",\n          }\n        ],\n        columns: [\n          {\n            field: \"materialS_NAME\",\n            title: \"产品名称\",\n            align: \"left\",\n            width: \"150px\",\n            cellStyle: function(value, row, index) {\n                // 设置超过行宽以省略号显示\n              return {\n                css: {\n                  \"overflow\": \"hidden\",\n                  \"text-overflow\": \"ellipsis\",\n                  \"white-space\": \"nowrap\",\n                  \"display\": \"inline-block\"\n                }\n              };\n            }\n          },\n          { field: \"receipT_NO\", title: \"发货单号\", align: \"center\" },\n          { field: \"sendProvince\", title: \"发货省\", align: \"center\" },\n          { field: \"sendCity\", title: \"发货城市\", align: \"center\" },\n          { field: \"receipT_SENDER\", title: \"发货单位\", align: \"center\" },\n          {\n            field: \"receipT_DATE\",\n            title: \"发货日期\",\n            align: \"center\",\n            formatter: function(val, row) {\n              return moment(val).format(\"YYYY-MM-DD HH:mm:ss\");\n            }\n          }\n        ]\n      }\n    };\n  },\n  computed: {\n    exportOptions: function() {\n      return {\n        id: this.tableOption.tableId,\n        name: this.tableOption.tableName,\n        url: TableApi.TableDataList\n      };\n    }\n  },\n  mounted: function() {\n  },\n  methods: {\n    // 表格回调事件名规则   传入的按钮 key + Block\n    // 编辑按钮回调事件\n    tableEditBlock: function(rowId) {\n      let obj = this.$refs.table.tableObj.bootstrapTable(\n        \"getRowByUniqueId\",\n        rowId\n      );\n      this.getSeleReportDataDetail(obj);\n      // console.log(obj);\n    },\n    // 禁用按钮回调事件\n    tablePauseBlock: function(rowId) {\n      let obj = this.$refs.table.tableObj.bootstrapTable(\n        \"getRowByUniqueId\",\n        rowId\n      );\n      this.deleReportData(rowId);\n    },\n    tableDetailBlock: function() {\n        console.log('详情按钮被点击');\n    },\n    // 动态搜索回调\n    search: function(params) {\n      this.refershTable(params);\n    },\n    // 新建 & 编辑表单记录完成后的回调事件\n    editCallback: function(type, params) {\n      // type = add   type = edit\n      this.refershTable(params);\n    },\n    getSeleReportDataDetail: function(reportObj) {\n      let _ = this;\n      TableApi.OutWareHoustDetailReport({\n        reportId: reportObj[\"receipT_NO\"]\n      }).then(res => {\n        console.log(res);\n        _.seleTableObj = res.result;\n        _.showAddRecordModal();\n      });\n    },\n    deleReportData: function(reportId) {\n      let _ = this;\n      TableApi.DeleteTableRecord({\n        reportId: reportId\n      }).then(res => {\n        console.log(res);\n        if (res.success) {\n          _.$refs.table.tableObj.bootstrapTable(\"removeByUniqueId\", reportId);\n          layer.msg(\"删除成功\");\n        }\n      });\n    },\n    // 刷新表单\n    refershTable: function(params) {\n      this.$refs.table.tableOption.url =\n        config.pgyerApiUrl + TableApi.TableDataList.options.url;\n      this.$refs.table.tableOption.params = params;\n      this.$refs.table.operation(\"refresh\");\n    },\n    // 显示新建 & 编辑表单记录弹框\n    showAddRecordModal: function() {\n      let _ = this;\n      _.isEdit = true;\n      _.$nextTick(() => {\n        _.layerId = layer.open({\n          type: 1,\n          title: \"添加报告记录\",\n          maxmin: false,\n          area: [\"70%\", \"70%\"],\n          content: $(\"#pop\"),\n          end: function() {\n            _.isEdit = false;\n            _.seleTableObj = {};\n          }\n        });\n      });\n    }\n  },\n\n  components: { vTable, vSearch, vEditTable }\n};\n</script>\n<style>\n.datetimepicker {\n  z-index: 21212121 !important;\n}\n</style>\n\n"],"sourceRoot":"src/views/TableModule/Table"}]}