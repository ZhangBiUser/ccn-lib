{"remainingRequest":"/Users/hq_failmy/Desktop/智慧树/node_modules/thread-loader/dist/cjs.js!/Users/hq_failmy/Desktop/智慧树/node_modules/babel-loader/lib/index.js!/Users/hq_failmy/Desktop/智慧树/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/hq_failmy/Desktop/智慧树/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hq_failmy/Desktop/智慧树/src/components/dynamicSearch/dynamic_Search.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hq_failmy/Desktop/智慧树/src/components/dynamicSearch/dynamic_Search.vue","mtime":1554863981190},{"path":"/Users/hq_failmy/Desktop/智慧树/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hq_failmy/Desktop/智慧树/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hq_failmy/Desktop/智慧树/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hq_failmy/Desktop/智慧树/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hq_failmy/Desktop/智慧树/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.map\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.string.trim\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.for-each\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport v_text from \"@c/dynamicSearch/text/text\";\nimport v_datetime from \"@c/dynamicSearch/datetime/datetime\";\nimport v_singleSelect from \"@c/dynamicSearch/select/singleSelect\";\nimport v_doubleSelect from \"@c/dynamicSearch/select/doubleSelect\";\nimport { export_json_to_excel } from \"@/excel/Export2Excel.js\";\nexport default {\n  data: function data() {\n    return {\n      isEdit: false,\n      showFucs: {\n        search: true,\n        export: true\n      },\n      btnList: []\n    };\n  },\n  props: [\"dynamicControls\", \"exportOptions\", \"searchOptions\", \"seleFunc\"],\n  beforeMount: function beforeMount() {},\n  mounted: function mounted() {\n    if (!$.isEmptyObject(this.seleFunc)) {\n      for (var key in this.seleFunc) {\n        if (key in this.showFucs) {\n          this.showFucs[key] = this.seleFunc[key];\n        } else {\n          if (\"addFunList\" in this.seleFunc) {\n            var list = this.seleFunc[\"addFunList\"] || [];\n            this.btnList = list.reverse();\n          }\n        }\n      }\n    }\n  },\n  methods: {\n    search: function search() {\n      var result = {};\n      this.$refs.child.forEach(function (item) {\n        if (item.options.type == \"v_doubleSelect\") {\n          for (var key in item.val) {\n            result[key] = item.val[key];\n          }\n        } else {\n          result[item.options.key] = item.val;\n        }\n      });\n\n      if (this.searchOptions.requiredCondition) {\n        var valid = false;\n\n        for (var key in result) {\n          if (result[key] != undefined && result[key].trim()) {\n            valid = true;\n          }\n        }\n\n        if (!valid) {\n          layer.open({\n            type: 0,\n            title: \"提示\",\n            content: \"请输入查询条件！\"\n          });\n          return;\n        }\n      }\n\n      this.$emit(\"callback\", result);\n    },\n    export2Excel: function export2Excel() {\n      var _this = this;\n\n      var _ = this;\n\n      var result = {};\n      this.$refs.child.forEach(function (item) {\n        if (item.options.type == \"v_doubleSelect\") {\n          for (var key in item.val) {\n            result[key] = item.val[key];\n          }\n        } else {\n          result[item.options.key] = item.val;\n        }\n      });\n\n      _.exportOptions.url(result).then(function (res) {\n        if (res.success) {\n          require.ensure([], function () {\n            var table = $(\"#\" + _.exportOptions.id); //debugger;\n\n            var dataList = res.result.items;\n            var AllColumns = table.bootstrapTable(\"getOptions\").columns[0];\n            var tHeader = [];\n            var Headers = [];\n            AllColumns.forEach(function (item) {\n              tHeader.push(item.title);\n              Headers.push(item.field);\n            });\n            var filterVal = tHeader;\n            var list = [];\n\n            var data = _this.formatJson(Headers, dataList);\n\n            export_json_to_excel(tHeader, data, _.exportOptions.name);\n          });\n        }\n      });\n    },\n    // 隐藏编辑表格数据模态框\n    edit: function edit() {\n      this.isEdit = false;\n      layer.close(this.layerId);\n    },\n    formatJson: function formatJson(filterVal, jsonData) {\n      return jsonData.map(function (v) {\n        return filterVal.map(function (j) {\n          return v[j];\n        });\n      });\n    }\n  },\n  components: {\n    v_text: v_text,\n    v_datetime: v_datetime,\n    v_singleSelect: v_singleSelect,\n    v_doubleSelect: v_doubleSelect\n  }\n};",{"version":3,"sources":["dynamic_Search.vue"],"names":[],"mappings":"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","sourcesContent":["\r\n<template>\r\n  <div>\r\n    <div class=\"form-group last-group\">\r\n      <template v-for=\"item in dynamicControls\">\r\n        <div class=\"form-group\" v-if=\"item.type!='br'\" :key=\"item.key\">\r\n          <component v-bind:is=\"item.type\" ref=\"child\" v-bind:options=\"item\"></component>\r\n        </div>\r\n        <br v-if=\"item.type=='br'\" :key=\"item.key\">\r\n      </template>\r\n    </div>\r\n    <div style=\"position: absolute;right: 0px;bottom: 10px;\">\r\n      <div :id=\"item.key\" v-for=\"item in btnList\" :key=\"item.key\" class=\"form-group pull-right\">\r\n        <button type=\"button\" class=\"btn btn-primary\" @click=\"item.method(item)\">\r\n          <i :class=\"item.iconStr ? 'fa ' + item.iconStr : ''\"></i>\r\n          {{item.title}}\r\n        </button>\r\n      </div>\r\n\r\n      <div v-if=\"showFucs.export\" class=\"form-group pull-right\">\r\n        <button type=\"button\" class=\"btn btn-primary\" @click=\"export2Excel\">\r\n          <i class=\"fa fa-download\"></i>\r\n          导出\r\n        </button>\r\n      </div>\r\n\r\n      <div v-if=\"showFucs.search\" class=\"form-group pull-right\">\r\n        <button type=\"button\" class=\"btn btn-primary\" @click=\"search\">\r\n          <i class=\"fa fa-search\"></i>\r\n          查询\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n\r\n<style>\r\n.box-body-resizer .search-bar input,\r\n.box-body-resizer .search-bar select {\r\n  width: 150px;\r\n}\r\n.bootstrap-select:not([class*=\"col-\"]):not([class*=\"form-control\"]):not(.input-group-btn) {\r\n  width: 150px;\r\n}\r\n.pull-right {\r\n  margin: 10px;\r\n}\r\ni {\r\n  vertical-align: middle;\r\n}\r\n</style>\r\n\r\n<script>\r\nimport v_text from \"@c/dynamicSearch/text/text\";\r\nimport v_datetime from \"@c/dynamicSearch/datetime/datetime\";\r\nimport v_singleSelect from \"@c/dynamicSearch/select/singleSelect\";\r\nimport v_doubleSelect from \"@c/dynamicSearch/select/doubleSelect\";\r\nimport { export_json_to_excel } from \"@/excel/Export2Excel.js\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      isEdit: false,\r\n      showFucs: {\r\n        search: true,\r\n        export: true\r\n      },\r\n      btnList: []\r\n    };\r\n  },\r\n  props: [\"dynamicControls\", \"exportOptions\", \"searchOptions\", \"seleFunc\"],\r\n  beforeMount() {},\r\n  mounted: function() {\r\n    if (!$.isEmptyObject(this.seleFunc)) {\r\n      for (var key in this.seleFunc) {\r\n        if (key in this.showFucs) {\r\n          this.showFucs[key] = this.seleFunc[key];\r\n        } else {\r\n          if (\"addFunList\" in this.seleFunc) {\r\n            let list = this.seleFunc[\"addFunList\"] || [];\r\n            this.btnList = list.reverse();\r\n          }\r\n        }\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    search: function() {\r\n      var result = {};\r\n      this.$refs.child.forEach(item => {\r\n        if (item.options.type == \"v_doubleSelect\") {\r\n          for (var key in item.val) {\r\n            result[key] = item.val[key];\r\n          }\r\n        } else {\r\n          result[item.options.key] = item.val;\r\n        }\r\n      });\r\n      if (this.searchOptions.requiredCondition) {\r\n        var valid = false;\r\n        for (const key in result) {\r\n          if (result[key] != undefined && result[key].trim()) {\r\n            valid = true;\r\n          }\r\n        }\r\n        if (!valid) {\r\n          layer.open({\r\n            type: 0,\r\n            title: \"提示\",\r\n            content: \"请输入查询条件！\"\r\n          });\r\n          return;\r\n        }\r\n      }\r\n      this.$emit(\"callback\", result);\r\n    },\r\n    export2Excel() {\r\n      var _ = this;\r\n      var result = {};\r\n      this.$refs.child.forEach(item => {\r\n        if (item.options.type == \"v_doubleSelect\") {\r\n          for (var key in item.val) {\r\n            result[key] = item.val[key];\r\n          }\r\n        } else {\r\n          result[item.options.key] = item.val;\r\n        }\r\n      });\r\n      _.exportOptions.url(result).then(res => {\r\n        if (res.success) {\r\n          require.ensure([], () => {\r\n            var table = $(\"#\" + _.exportOptions.id);\r\n            //debugger;\r\n            var dataList = res.result.items;\r\n            var AllColumns = table.bootstrapTable(\"getOptions\").columns[0];\r\n            const tHeader = [];\r\n            const Headers = [];\r\n            AllColumns.forEach(item => {\r\n              tHeader.push(item.title);\r\n              Headers.push(item.field);\r\n            });\r\n            const filterVal = tHeader;\r\n            const list = [];\r\n            const data = this.formatJson(Headers, dataList);\r\n            export_json_to_excel(tHeader, data, _.exportOptions.name);\r\n          });\r\n        }\r\n      });\r\n    },\r\n    // 隐藏编辑表格数据模态框\r\n    edit: function() {\r\n      this.isEdit = false;\r\n      layer.close(this.layerId);\r\n    },\r\n    formatJson(filterVal, jsonData) {\r\n      return jsonData.map(v => filterVal.map(j => v[j]));\r\n    }\r\n  },\r\n  components: {\r\n    v_text,\r\n    v_datetime,\r\n    v_singleSelect,\r\n    v_doubleSelect\r\n  }\r\n};\r\n</script>\r\n"],"sourceRoot":"src/components/dynamicSearch"}]}