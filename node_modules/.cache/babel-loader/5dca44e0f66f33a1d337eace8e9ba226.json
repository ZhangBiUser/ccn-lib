{"remainingRequest":"/Users/hq_failmy/Desktop/封装控件0423/node_modules/babel-loader/lib/index.js!/Users/hq_failmy/Desktop/封装控件0423/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/hq_failmy/Desktop/封装控件0423/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hq_failmy/Desktop/封装控件0423/src/views/NewModule/ShellGlobalCode/New.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hq_failmy/Desktop/封装控件0423/src/views/NewModule/ShellGlobalCode/New.vue","mtime":1556017811536},{"path":"/Users/hq_failmy/Desktop/封装控件0423/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hq_failmy/Desktop/封装控件0423/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hq_failmy/Desktop/封装控件0423/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hq_failmy/Desktop/封装控件0423/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.find\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport vBasePage from \"../../BasePage/BasePage\";\nimport NewApi from \"../webapi/New\";\nimport config from \"@/config/index\";\nimport moment from \"moment\";\nvar TableUniqueId = \"id\";\nexport default {\n  data: function data() {\n    return {\n      searchOptions: {\n        searchOptions: {\n          requiredCondition: false\n        },\n        seleFunc: {\n          export: false,\n          search: true\n        },\n        // exportUrl: NewApi.GetAppInfoList,\n        search_controls: [{\n          type: \"v_text\",\n          title: \"产品名称\",\n          key: \"productName\"\n        }, {\n          type: \"v_text\",\n          title: \"产品编码\",\n          key: \"productCode\"\n        }, {\n          type: \"v_text\",\n          title: \"生产批号\",\n          key: \"batchNo\"\n        }]\n      },\n      buttonOptions: [{\n        title: \"添加\",\n        key: \"add\",\n        enable: true,\n        iconStr: \"fa-plus\"\n      }],\n      editOptions: {\n        dynamicEdits: {\n          apiUrl: NewApi.SaveCheckReport,\n          list: [{\n            lineType: \"single\",\n            rowList: [{\n              type: \"v_singleSelect\",\n              title: \"生产批次\",\n              key: \"batchNo\",\n              isRequest: true,\n              apiUrl: NewApi.GetBatchList,\n              hasValChange: true,\n              selectkey: \"batchId\",\n              selectvalue: \"batchNo\",\n              validators: {\n                notEmpty: {\n                  enabled: true,\n                  message: \"生产批次不能为空\"\n                }\n              }\n            }, {\n              type: \"v_text\",\n              title: \"产品名称\",\n              key: \"productName\",\n              isRequest: true,\n              editDisabled: true,\n              //编辑环境下是否禁用\n              addDisabled: true //添加环境下是否禁用\n\n            }, {\n              type: \"v_upload\",\n              key: \"checkReportImg\",\n              title: \"检验单\",\n              // isRequest: true,\n              uploadNum: 1,\n              // 文件数量,默认为1，多张图片以，号拼接字符串形式提交\n              fileSizeLimit: 3 // 文件大小  以兆为单位\n              // validators: {\n              //   notEmpty: {\n              //     enabled: true,\n              //     message: \"选择上传的文件不能为空\"\n              //   }\n              // }\n\n            }, {\n              type: \"v_upload\",\n              key: \"billOfEntryImg\",\n              title: \"报关单\",\n              // isRequest: true,\n              uploadNum: 1,\n              // 文件数量,默认为1，多张图片以，号拼接字符串形式提交\n              fileSizeLimit: 3 // 文件大小  以兆为单位\n              // validators: {\n              //   notEmpty: {\n              //     enabled: true,\n              //     message: \"选择上传的文件不能为空\"\n              //   }\n              // }\n\n            }, {\n              type: \"v_upload\",\n              key: \"taxListImg\",\n              title: \"税单\",\n              // isRequest: true,\n              uploadNum: 1,\n              // 文件数量,默认为1，多张图片以，号拼接字符串形式提交\n              fileSizeLimit: 3 // 文件大小  以兆为单位\n              // validators: {\n              //   notEmpty: {\n              //     enabled: true,\n              //     message: \"选择上传的文件不能为空\"\n              //   }\n              // }\n\n            }]\n          }]\n        }\n      },\n      tableOption: {\n        tableId: \"proofreport\",\n        tableName: \"凭据统计报表\",\n        url: config.pgyerApiUrl + NewApi.GetCheckReport.options.url,\n        method: NewApi.GetCheckReport.options.method,\n        uniqueId: TableUniqueId,\n        actions: [{\n          key: \"tableEdit\",\n          title: \"编辑\",\n          url: NewApi.GetCheckReportById,\n          method: NewApi.GetCheckReportById.method\n        }, {\n          key: \"tableDelete\",\n          url: NewApi.delCheckReport,\n          method: NewApi.delCheckReport.method,\n          title: \"删除\",\n          successTip: '删除成功'\n        }],\n        columns: [{\n          field: \"productCode\",\n          title: \"产品编码\",\n          align: \"center\"\n        }, {\n          field: \"productName\",\n          title: \"产品名称\",\n          align: \"center\"\n        }, {\n          field: \"batchNo\",\n          title: \"生产批号\",\n          align: \"center\"\n        }, {\n          field: \"lastMondificationTime\",\n          title: \"上传日期\",\n          align: \"center\",\n          formatter: function formatter(val, row) {\n            return moment(val).format(\"YYYY-MM-DD HH:mm\");\n          }\n        }]\n      }\n    };\n  },\n  methods: {\n    rowClick: function rowClick(rowItem, element, baseObject) {\n      console.log(element);\n\n      var _ = this;\n\n      if (element.id == \"tablePause\") {\n        NewApi.UpdateDeleteStatus;\n\n        var currentAction = _.tableOption.actions.find(function (item) {\n          return item.key == element.id;\n        });\n\n        var param = {};\n        param[\"isDelete\"] = rowItem[currentAction.statuKey] ? 0 : 1;\n        param[_.tableOption.uniqueId] = rowItem[_.tableOption.uniqueId];\n        NewApi.UpdateDeleteStatus(param).then(function (res) {\n          baseObject.$refs.table.operation(\"refresh\");\n        });\n      }\n    },\n    componentMountBefore: function componentMountBefore(element, basepage) {\n      debugger;\n    },\n    componentMountAfter: function componentMountAfter(element, basepage) {},\n    // 编辑模态框中  组件值发生变化\n    componentValueChange: function componentValueChange(element, basepage) {\n      var editChildArr = basepage.$refs.editModule.$refs.child || [];\n\n      if (element.options.key == \"batchNo\") {\n        var target = editChildArr.find(function (item) {\n          return item.options.key == \"productName\";\n        });\n        target.setValue(element.options.item.productName); // debugger;\n      }\n    }\n  },\n  components: {\n    vBasePage: vBasePage\n  }\n};",{"version":3,"sources":["New.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <vBasePage\n    :searchOptions=\"searchOptions\"\n    :buttonOptions=\"buttonOptions\"\n    :editOptions=\"editOptions\"\n    :tableOption=\"tableOption\"\n    @rowBlock=\"rowClick\"\n    @componentMountBefore=\"componentMountBefore\"\n    @componentMountAfter=\"componentMountAfter\"\n    @componentValueChange=\"componentValueChange\"\n  ></vBasePage>\n</template>\n\n<script>\nimport vBasePage from \"../../BasePage/BasePage\";\nimport NewApi from \"../webapi/New\";\nimport config from \"@/config/index\";\nimport moment from \"moment\";\n\nvar TableUniqueId = \"id\";\nexport default {\n  data() {\n    return {\n      searchOptions: {\n        searchOptions: {\n          requiredCondition: false\n        },\n        seleFunc: {\n          export: false,\n          search: true\n        },\n        // exportUrl: NewApi.GetAppInfoList,\n        search_controls: [\n          {\n            type: \"v_text\",\n            title: \"产品名称\",\n            key: \"productName\"\n          },\n          {\n            type: \"v_text\",\n            title: \"产品编码\",\n            key: \"productCode\"\n          },\n          {\n            type: \"v_text\",\n            title: \"生产批号\",\n            key: \"batchNo\"\n          },\n        ]\n      },\n      buttonOptions: [\n        {\n          title: \"添加\",\n          key: \"add\",\n          enable: true,\n          iconStr: \"fa-plus\"\n        }\n      ],\n      editOptions: {\n        dynamicEdits: {\n          apiUrl: NewApi.SaveCheckReport,\n          list: [\n            {\n              lineType: \"single\",\n              rowList: [\n                {\n                  type: \"v_singleSelect\",\n                  title: \"生产批次\",\n                  key: \"batchNo\",\n                  isRequest: true,\n                  apiUrl: NewApi.GetBatchList,\n                  hasValChange: true,\n                  selectkey: \"batchId\",\n                  selectvalue: \"batchNo\",\n                  validators: {\n                    notEmpty: {\n                      enabled: true,\n                      message: \"生产批次不能为空\"\n                    }\n                  }\n                },\n                {\n                  type: \"v_text\",\n                  title: \"产品名称\",\n                  key: \"productName\",\n                  isRequest: true,\n                  editDisabled: true, //编辑环境下是否禁用\n                  addDisabled: true, //添加环境下是否禁用\n                },\n                {\n                  type: \"v_upload\",\n                  key: \"checkReportImg\",\n                  title: \"检验单\",\n                  // isRequest: true,\n                  uploadNum: 1, // 文件数量,默认为1，多张图片以，号拼接字符串形式提交\n                  fileSizeLimit: 3, // 文件大小  以兆为单位\n                  // validators: {\n                  //   notEmpty: {\n                  //     enabled: true,\n                  //     message: \"选择上传的文件不能为空\"\n                  //   }\n                  // }\n                },\n                {\n                  type: \"v_upload\",\n                  key: \"billOfEntryImg\",\n                  title: \"报关单\",\n                  // isRequest: true,\n                  uploadNum: 1, // 文件数量,默认为1，多张图片以，号拼接字符串形式提交\n                  fileSizeLimit: 3, // 文件大小  以兆为单位\n                  // validators: {\n                  //   notEmpty: {\n                  //     enabled: true,\n                  //     message: \"选择上传的文件不能为空\"\n                  //   }\n                  // }\n                },\n                {\n                  type: \"v_upload\",\n                  key: \"taxListImg\",\n                  title: \"税单\",\n                  // isRequest: true,\n                  uploadNum: 1, // 文件数量,默认为1，多张图片以，号拼接字符串形式提交\n                  fileSizeLimit: 3, // 文件大小  以兆为单位\n                  // validators: {\n                  //   notEmpty: {\n                  //     enabled: true,\n                  //     message: \"选择上传的文件不能为空\"\n                  //   }\n                  // }\n                }\n              ]\n            }\n          ]\n        }\n      },\n      tableOption: {\n        tableId: \"proofreport\",\n        tableName: \"凭据统计报表\",\n        url: config.pgyerApiUrl + NewApi.GetCheckReport.options.url,\n        method: NewApi.GetCheckReport.options.method,\n        uniqueId: TableUniqueId,\n        actions: [\n          {\n            key: \"tableEdit\",\n            title: \"编辑\",\n            url: NewApi.GetCheckReportById,\n            method: NewApi.GetCheckReportById.method,\n          },\n          {\n            key: \"tableDelete\",\n            url: NewApi.delCheckReport,\n            method: NewApi.delCheckReport.method,\n            title: \"删除\",\n            successTip: '删除成功'\n          }\n        ],\n        columns: [\n          {\n            field: \"productCode\",\n            title: \"产品编码\",\n            align: \"center\"\n          },\n          {\n            field: \"productName\",\n            title: \"产品名称\",\n            align: \"center\"\n          },\n          {\n            field: \"batchNo\",\n            title: \"生产批号\",\n            align: \"center\"\n          },\n          {\n            field: \"lastMondificationTime\",\n            title: \"上传日期\",\n            align: \"center\",\n            formatter: function(val, row) {\n              return moment(val).format(\"YYYY-MM-DD HH:mm\");\n            }\n          }\n        ]\n      }\n    };\n  },\n  methods: {\n    rowClick: function(rowItem, element, baseObject) {\n      console.log(element);\n      let _ = this;\n      if (element.id == \"tablePause\") {\n        NewApi.UpdateDeleteStatus;\n        let currentAction = _.tableOption.actions.find(item => {\n          return item.key == element.id;\n        });\n        let param = {};\n        param[\"isDelete\"] = rowItem[currentAction.statuKey] ? 0 : 1;\n        param[_.tableOption.uniqueId] = rowItem[_.tableOption.uniqueId];\n\n        NewApi.UpdateDeleteStatus(param).then(res => {\n          baseObject.$refs.table.operation(\"refresh\");\n        });\n      }\n    },\n    componentMountBefore: function(element, basepage) {\n      debugger;\n    },\n    componentMountAfter: function(element, basepage) {},\n    // 编辑模态框中  组件值发生变化\n    componentValueChange: function(element, basepage) {\n      let editChildArr = basepage.$refs.editModule.$refs.child || [];\n      if (element.options.key == \"batchNo\") {\n        let target = editChildArr.find(item => {\n          return item.options.key == \"productName\";\n        });\n        target.setValue(element.options.item.productName);\n        // debugger;\n      }\n    }\n  },\n  components: { vBasePage }\n};\n</script>\n\n"],"sourceRoot":"src/views/NewModule/ShellGlobalCode"}]}