{"remainingRequest":"/Users/hq_failmy/Desktop/前端代码0405/node_modules/babel-loader/lib/index.js!/Users/hq_failmy/Desktop/前端代码0405/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/hq_failmy/Desktop/前端代码0405/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hq_failmy/Desktop/前端代码0405/src/views/ShellGlobalModule/ShellGlobalCode/ShellGlobal.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hq_failmy/Desktop/前端代码0405/src/views/ShellGlobalModule/ShellGlobalCode/ShellGlobal.vue","mtime":1554691068132},{"path":"/Users/hq_failmy/Desktop/前端代码0405/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hq_failmy/Desktop/前端代码0405/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hq_failmy/Desktop/前端代码0405/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hq_failmy/Desktop/前端代码0405/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport vTable from \"@c/tables/table\";\nimport vSearch from \"@c/dynamicSearch/dynamic_Search\";\nimport vEditTable from \"@c/edit_table\";\nimport vButtons from \"@c/buttons\";\nimport AreaApi from \"../../DictModule/webapi/AreaApi\";\nimport DataApi from \"../../DictModule/webapi/DataApi\";\nimport MatlApi from \"../../MatlModule/webapi/MaterialsApi\";\nimport ShellApi from \"../webapi/ShellGlobal\";\nimport moment from \"moment\";\nimport config from \"@/config/index\";\nimport { pageTool } from \"@/js/util.js\";\nvar TerminalType = {\n  \"1\": \"总控\",\n  \"2\": \"分控\",\n  \"3\": \"HubApp\",\n  \"4\": \"CCN\"\n};\nvar TableUniqueId = \"AppId\";\nexport default {\n  data: function data() {\n    var _ = this;\n\n    return {\n      isEdit: false,\n      formData: {\n        No: \"\",\n        //编号\n        Name: \"\",\n        //名称\n        Code: \"\",\n        //编码\n        MnenonicCode: \"\" //助记码\n\n      },\n      // 选择所需的功能按钮\n      // seleFunc: { add: true, export: true, search: true },\n      // 选择所需的功能按钮\n      // seleFunc: { add: true, export: true, search: true },\n      // 动态创建所需的功能按钮，添加 和 导出 功能已封装完善，默认显示\n      seleFunc: {\n        export: false,\n        search: true\n      },\n      buttonOptions: [// {\n      //   title: \"下载\",\n      //   method: function(e, item) {\n      //     console.log(\"下载被点击\");\n      //     debugger;\n      //     let seleCheckBoxs = _.$refs.table.tableObj.bootstrapTable(\n      //       \"getSelections\"\n      //     );\n      //   }\n      // },\n      {\n        title: \"添加\",\n        iconStr: \"fa-plus\",\n        method: function method() {\n          _.showAddRecordModal();\n        }\n      }],\n      //   \"OrganiztionSN\": \"CNN100364\",\n      // \"AppKey\": \" 6640a392dfbd9c0a\",\n      // \"AppSecret\": \"68bac75ed032e0a86bc3eae1b5c996cf\",\n      // \"TerminalType\": 1,\n      // \"IsDelete\": \"1\",\n      search_controls: [{\n        type: \"v_singleSelect\",\n        title: \"部署点\",\n        key: \"OrganiztionSN\",\n        apiUrl: ShellApi.GetOrganiztionList,\n        //params: { aaa: \"fff\" },\n        selectkey: \"OrganiztionId\",\n        selectvalue: \"OrganiztionSN\"\n      }, {\n        type: \"v_singleSelect\",\n        title: \"状态\",\n        key: \"IsDelete\",\n        data: [{\n          typeid: \"0\",\n          typename: \"启用\"\n        }, {\n          typeid: \"1\",\n          typename: \"禁用\"\n        }],\n        selectkey: \"typeid\",\n        selectvalue: \"typename\"\n      }, {\n        type: \"v_singleSelect\",\n        title: \"设备类型\",\n        key: \"TerminalType\",\n        data: [{\n          id: \"1\",\n          value: \"总控\"\n        }, {\n          id: \"2\",\n          value: \"分控\"\n        }, {\n          id: \"3\",\n          value: \"HubApp\"\n        }, {\n          id: \"4\",\n          value: \"CCN\"\n        }],\n        selectkey: \"id\",\n        selectvalue: \"value\"\n      }],\n      // vEditTable 组件数据\n      dynamicEdits: {\n        apiUrl: ShellApi.UpdateDeleteStatus,\n        paras: {},\n        list: [{\n          lineType: \"single\",\n          rowList: [{\n            type: \"v_text\",\n            title: \"AppKey\",\n            key: \"AppKey\",\n            isRequest: true,\n            validators: {\n              notEmpty: {\n                enabled: true,\n                message: \"AppKey不能为空\"\n              }\n            }\n          }, {\n            type: \"v_text\",\n            title: \"AppSecret\",\n            key: \"AppSecret\",\n            isRequest: true,\n            validators: {\n              notEmpty: {\n                enabled: true,\n                message: \"AppSecret不能为空\"\n              }\n            }\n          }, {\n            type: \"v_singleSelect\",\n            title: \"设备类型\",\n            key: \"TerminalType\",\n            data: [{\n              TerminalType: \"1\",\n              value: \"总控\"\n            }, {\n              TerminalType: \"2\",\n              value: \"分控\"\n            }, {\n              TerminalType: \"3\",\n              value: \"HubApp\"\n            }, {\n              TerminalType: \"4\",\n              value: \"CCN\"\n            }],\n            selectkey: \"TerminalType\",\n            selectvalue: \"value\",\n            isRequest: true,\n            validators: {\n              notEmpty: {\n                enabled: true,\n                message: \"设备类型不能为空\"\n              }\n            }\n          }, {\n            type: \"v_singleSelect\",\n            title: \"部署点\",\n            key: \"OrganiztionSN\",\n            apiUrl: ShellApi.GetOrganiztionList,\n            //params: { aaa: \"fff\" },\n            selectkey: \"OrganiztionId\",\n            selectvalue: \"OrganiztionSN\",\n            isRequest: true,\n            validators: {\n              notEmpty: {\n                enabled: true,\n                message: \"部署点不能为空\"\n              }\n            }\n          }, {\n            type: \"v_text\",\n            title: \"备注\",\n            key: \"Remark\",\n            isRequest: false,\n            validators: {\n              notEmpty: {\n                enabled: false\n              }\n            }\n          }]\n        }]\n      },\n      seleTableObj: {},\n      // 选中的表单行数据\n      searchOptions: {\n        requiredCondition: true\n      },\n      tableOption: {\n        tableId: \"sendreport\",\n        tableName: \"发货统计报表\",\n        url: config.pgyerApiUrl + ShellApi.GetAppInfoList.options.url,\n        method: ShellApi.GetAppInfoList.options.method,\n        uniqueId: TableUniqueId,\n        // actions: [\n        //   {\n        //     key: \"tableEdit\",\n        //     title: \"编辑\"\n        //   },\n        //   {\n        //     key: \"tablePause\",\n        //     title: \"启用/禁用\",\n        //     buttonType: 'btn-danger'\n        //   },\n        //   {\n        //     key: \"tableDownload\",\n        //     title: \"下载\"\n        //   }\n        // ],\n        columns: [{\n          field: \"OrganiztionSN\",\n          title: \"部署点编号\",\n          align: \"left\",\n          width: \"150px\",\n          cellStyle: function cellStyle(value, row, index) {\n            // 设置超过行宽以省略号显示\n            return {\n              css: {\n                overflow: \"hidden\",\n                \"text-overflow\": \"ellipsis\",\n                \"white-space\": \"nowrap\",\n                display: \"inline-block\"\n              }\n            };\n          }\n        }, {\n          field: \"AppKey\",\n          title: \"AppKey\",\n          align: \"center\"\n        }, {\n          field: \"AppSecret\",\n          title: \"AppSecret\",\n          align: \"center\"\n        }, {\n          field: \"TerminalType\",\n          title: \"设备类型\",\n          align: \"center\",\n          formatter: function formatter(val, row) {\n            return TerminalType[row.TerminalType];\n          }\n        }, {\n          field: \"IsDelete\",\n          title: \"状态\",\n          align: \"center\",\n          formatter: function formatter(val, row) {\n            return row.IsDelete == 1 ? \"禁用\" : \"启用\";\n          }\n        }, {\n          field: \"action\",\n          title: \"操作\",\n          align: \"\",\n          formatter: function formatter(val, row) {\n            var rowId = row[TableUniqueId];\n            var btnType = {};\n\n            if (row[\"IsDelete\"] == 1) {\n              btnType.className = \"btn btn-danger\";\n              btnType.title = \"禁用\";\n            } else {\n              btnType.className = \"btn btn-success\";\n              btnType.title = \"启用\";\n            }\n\n            var pauseStr = \"<button id=\" + \"tablePause\" + \" type=button class=\" + '\"' + btnType.className + '\"' + \" +  rowId=\" + rowId + \">\" + btnType.title + \"</button>&nbsp;\";\n            return \"<button id='tableEdit' type='button' class='btn btn-primary' rowId=\" + rowId + '>编辑</button>&nbsp;' + pauseStr + \"<button id='tableDownload' type='button' class='btn btn-primary' rowId=\" + rowId + '>下载</button>';\n          }\n        }]\n      }\n    };\n  },\n  computed: {\n    exportOptions: function exportOptions() {\n      return {\n        id: this.tableOption.tableId,\n        name: this.tableOption.tableName,\n        url: ShellApi.TableDataList\n      };\n    }\n  },\n  mounted: function mounted() {},\n  methods: {\n    // 表格回调事件名规则   传入的按钮 key + Block\n    // 编辑按钮点击事件\n    tableEditBlock: function tableEditBlock(rowItem) {\n      var _ = this;\n\n      ShellApi.GetAppInfoById({\n        AppId: rowItem[TableUniqueId]\n      }).then(function (res) {\n        debugger;\n        _.seleTableObj = res.result;\n\n        _.showAddRecordModal();\n      });\n    },\n    // 禁用按钮点击事件\n    tablePauseBlock: function tablePauseBlock(rowItem, btn) {\n      var _ = this;\n\n      ShellApi.UpdateDeleteStatus({\n        AppId: rowItem[TableUniqueId]\n      }).then(function (res) {\n        debugger;\n        $(btn).removeClass('btn-danger').addClass('btn-success');\n\n        _.$refs.table.operation(\"refresh\");\n      });\n    },\n    // 下载按钮点击事件\n    tableDownloadBlock: function tableDownloadBlock(rowItem) {\n      var _ = this;\n\n      debugger;\n      ShellApi.GetAppXMLDownLoadUrl({\n        AppId: rowItem[TableUniqueId]\n      }).then(function (res) {\n        if (res.success) {\n          debugger;\n          console.log(res);\n          location.href = res.result;\n        }\n      });\n    },\n    // 动态搜索回调\n    search: function search(params) {\n      console.log(params); // AppKey\n      // AppSecret\n      // TerminalType  1-总控机；2-分控机；3-HubApp；4-CCN；\n      // IsDelete  是否删除： 0表示是，1表示否\n\n      this.refreshTable(params);\n    },\n    // 新建 & 编辑表单记录完成后的回调事件\n    editCallback: function editCallback(type, params) {\n      // type = add   type = edit\n      // this.refreshTable(params);\n      this.$refs.table.operation(\"refresh\");\n    },\n    deleReportData: function deleReportData(reportId) {\n      var _ = this;\n\n      ShellApi.DeleteTableRecord({\n        reportId: reportId\n      }).then(function (res) {\n        console.log(res);\n\n        if (res.success) {\n          _.$refs.table.tableObj.bootstrapTable(\"removeByUniqueId\", reportId);\n\n          layer.msg(\"删除成功\");\n        }\n      });\n    },\n    // 刷新表单\n    refreshTable: function refreshTable(params) {\n      this.$refs.table.tableOption.url = config.pgyerApiUrl + ShellApi.GetAppInfoList.options.url;\n      this.$refs.table.tableOption.params = params;\n      this.$refs.table.operation(\"refresh\");\n    },\n    // 显示新建 & 编辑表单记录弹框\n    showAddRecordModal: function showAddRecordModal() {\n      var _ = this;\n\n      _.isEdit = true;\n\n      _.$nextTick(function () {\n        _.layerId = layer.open({\n          type: 1,\n          title: \"添加报告记录\",\n          maxmin: false,\n          area: [\"70%\", \"70%\"],\n          content: $(\"#pop\"),\n          end: function end() {\n            _.isEdit = false;\n            _.seleTableObj = {};\n          }\n        });\n      });\n    }\n  },\n  components: {\n    vTable: vTable,\n    vSearch: vSearch,\n    vEditTable: vEditTable,\n    vButtons: vButtons\n  }\n};",{"version":3,"sources":["ShellGlobal.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <div class=\"box box-default\">\n      <div class=\"box-body box-body-resizer\">\n        <form class=\"form-inline\" id=\"search-query\" style=\"display: inline-block;\n    width: 100%;\">\n          <div class=\"search-bar\" style=\"float:left;width:99%;position: relative;\">\n            <vSearch\n              v-bind:dynamicControls=\"search_controls\"\n              v-bind:exportOptions=\"exportOptions\"\n              v-bind:searchOptions=\"searchOptions\"\n              v-bind:seleFunc=\"seleFunc\"\n              @callback=\"search\"\n              style=\"float:left\"\n            ></vSearch>\n            <br>\n          </div>\n        </form>\n\n        <div style=\"position: relative;height: 60px;\">\n          <vButtons :buttonOptions=\"buttonOptions\"></vButtons>\n        </div>\n        <vEditTable\n          v-if=\"isEdit\"\n          id=\"pop\"\n          :dynamicEdits=\"dynamicEdits\"\n          :seleTableObj=\"seleTableObj\"\n          @editCallback=\"editCallback\"\n        ></vEditTable>\n\n        <vTable\n          ref=\"table\"\n          :option=\"tableOption\"\n          @tableEditBlock=\"tableEditBlock\"\n          @tablePauseBlock=\"tablePauseBlock\"\n          @tableDownloadBlock=\"tableDownloadBlock\"\n        ></vTable>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport vTable from \"@c/tables/table\";\nimport vSearch from \"@c/dynamicSearch/dynamic_Search\";\nimport vEditTable from \"@c/edit_table\";\nimport vButtons from \"@c/buttons\";\n\nimport AreaApi from \"../../DictModule/webapi/AreaApi\";\nimport DataApi from \"../../DictModule/webapi/DataApi\";\nimport MatlApi from \"../../MatlModule/webapi/MaterialsApi\";\nimport ShellApi from \"../webapi/ShellGlobal\";\nimport moment from \"moment\";\nimport config from \"@/config/index\";\nimport { pageTool } from \"@/js/util.js\";\nvar TerminalType = {\n  \"1\": \"总控\",\n  \"2\": \"分控\",\n  \"3\": \"HubApp\",\n  \"4\": \"CCN\"\n};\nvar TableUniqueId = \"AppId\";\n\nexport default {\n  data() {\n    var _ = this;\n    return {\n      isEdit: false,\n      formData: {\n        No: \"\", //编号\n        Name: \"\", //名称\n        Code: \"\", //编码\n        MnenonicCode: \"\" //助记码\n      },\n      // 选择所需的功能按钮\n      // seleFunc: { add: true, export: true, search: true },\n      // 选择所需的功能按钮\n      // seleFunc: { add: true, export: true, search: true },\n      // 动态创建所需的功能按钮，添加 和 导出 功能已封装完善，默认显示\n      seleFunc: {\n        export: false,\n        search: true\n      \n      },\n      buttonOptions: [\n        // {\n        //   title: \"下载\",\n        //   method: function(e, item) {\n        //     console.log(\"下载被点击\");\n        //     debugger;\n        //     let seleCheckBoxs = _.$refs.table.tableObj.bootstrapTable(\n        //       \"getSelections\"\n        //     );\n        //   }\n        // },\n        {\n          title: \"添加\",\n          iconStr: \"fa-plus\",\n          method: function() {\n            _.showAddRecordModal();\n          }\n        }\n      ],\n      //   \"OrganiztionSN\": \"CNN100364\",\n      // \"AppKey\": \" 6640a392dfbd9c0a\",\n      // \"AppSecret\": \"68bac75ed032e0a86bc3eae1b5c996cf\",\n      // \"TerminalType\": 1,\n      // \"IsDelete\": \"1\",\n      search_controls: [\n        {\n          type: \"v_singleSelect\",\n          title: \"部署点\",\n          key: \"OrganiztionSN\",\n          apiUrl: ShellApi.GetOrganiztionList,\n          //params: { aaa: \"fff\" },\n          selectkey: \"OrganiztionId\",\n          selectvalue: \"OrganiztionSN\"\n        },\n        {\n          type: \"v_singleSelect\",\n          title: \"状态\",\n          key: \"IsDelete\",\n          data: [\n            {\n              typeid: \"0\",\n              typename: \"启用\"\n            },\n            {\n              typeid: \"1\",\n              typename: \"禁用\"\n            }\n          ],\n          selectkey: \"typeid\",\n          selectvalue: \"typename\"\n        },\n        {\n          type: \"v_singleSelect\",\n          title: \"设备类型\",\n          key: \"TerminalType\",\n          data: [\n            {\n              id: \"1\",\n              value: \"总控\"\n            },\n            {\n              id: \"2\",\n              value: \"分控\"\n            },\n            {\n              id: \"3\",\n              value: \"HubApp\"\n            },\n            {\n              id: \"4\",\n              value: \"CCN\"\n            }\n          ],\n          selectkey: \"id\",\n          selectvalue: \"value\"\n        }\n      ],\n      // vEditTable 组件数据\n      dynamicEdits: {\n        apiUrl: ShellApi.UpdateDeleteStatus,\n        paras: {},\n        list: [\n          {\n            lineType: \"single\",\n            rowList: [\n              {\n                type: \"v_text\",\n                title: \"AppKey\",\n                key: \"AppKey\",\n                isRequest: true,\n                validators: {\n                  notEmpty: {\n                    enabled: true,\n                    message: \"AppKey不能为空\"\n                  }\n                }\n              },\n              {\n                type: \"v_text\",\n                title: \"AppSecret\",\n                key: \"AppSecret\",\n                isRequest: true,\n                validators: {\n                  notEmpty: {\n                    enabled: true,\n                    message: \"AppSecret不能为空\"\n                  }\n                }\n              },\n              {\n                type: \"v_singleSelect\",\n                title: \"设备类型\",\n                key: \"TerminalType\",\n                data: [\n                  {\n                    TerminalType: \"1\",\n                    value: \"总控\"\n                  },\n                  {\n                    TerminalType: \"2\",\n                    value: \"分控\"\n                  },\n                  {\n                    TerminalType: \"3\",\n                    value: \"HubApp\"\n                  },\n                  {\n                    TerminalType: \"4\",\n                    value: \"CCN\"\n                  }\n                ],\n                selectkey: \"TerminalType\",\n                selectvalue: \"value\",\n                isRequest: true,\n                validators: {\n                  notEmpty: {\n                    enabled: true,\n                    message: \"设备类型不能为空\"\n                  }\n                }\n              },\n              {\n                type: \"v_singleSelect\",\n                title: \"部署点\",\n                key: \"OrganiztionSN\",\n                apiUrl: ShellApi.GetOrganiztionList,\n                //params: { aaa: \"fff\" },\n                selectkey: \"OrganiztionId\",\n                selectvalue: \"OrganiztionSN\",\n                isRequest: true,\n                validators: {\n                  notEmpty: {\n                    enabled: true,\n                    message: \"部署点不能为空\"\n                  }\n                }\n              },\n              {\n                type: \"v_text\",\n                title: \"备注\",\n                key: \"Remark\",\n                isRequest: false,\n                validators: {\n                  notEmpty: {\n                    enabled: false\n                  }\n                }\n              }\n            ]\n          }\n        ]\n      },\n      seleTableObj: {}, // 选中的表单行数据\n\n      searchOptions: {\n        requiredCondition: true\n      },\n      tableOption: {\n        tableId: \"sendreport\",\n        tableName: \"发货统计报表\",\n        url: config.pgyerApiUrl + ShellApi.GetAppInfoList.options.url,\n        method: ShellApi.GetAppInfoList.options.method,\n        uniqueId: TableUniqueId,\n        // actions: [\n        //   {\n        //     key: \"tableEdit\",\n        //     title: \"编辑\"\n        //   },\n        //   {\n        //     key: \"tablePause\",\n        //     title: \"启用/禁用\",\n        //     buttonType: 'btn-danger'\n        //   },\n        //   {\n        //     key: \"tableDownload\",\n        //     title: \"下载\"\n        //   }\n        // ],\n        columns: [\n          {\n            field: \"OrganiztionSN\",\n            title: \"部署点编号\",\n            align: \"left\",\n            width: \"150px\",\n            cellStyle: function(value, row, index) {\n              // 设置超过行宽以省略号显示\n              return {\n                css: {\n                  overflow: \"hidden\",\n                  \"text-overflow\": \"ellipsis\",\n                  \"white-space\": \"nowrap\",\n                  display: \"inline-block\"\n                }\n              };\n            }\n          },\n          { field: \"AppKey\", title: \"AppKey\", align: \"center\" },\n          { field: \"AppSecret\", title: \"AppSecret\", align: \"center\" },\n          {\n            field: \"TerminalType\",\n            title: \"设备类型\",\n            align: \"center\",\n            formatter: function(val, row) {\n              return TerminalType[row.TerminalType];\n            }\n          },\n          {\n            field: \"IsDelete\",\n            title: \"状态\",\n            align: \"center\",\n            formatter: function(val, row) {\n              return row.IsDelete == 1 ? \"禁用\" : \"启用\";\n            }\n          },\n          {\n            field: \"action\",\n            title: \"操作\",\n            align: \"\",\n            formatter: function(val, row) {\n              \n              let rowId = row[TableUniqueId];\n              let btnType = {};\n              if (row[\"IsDelete\"] == 1) {\n                 btnType.className = \"btn btn-danger\";\n                 btnType.title = \"禁用\";\n              } else {\n                btnType.className = \"btn btn-success\";\n                btnType.title = \"启用\";\n              }\n              let pauseStr = \"<button id=\" +\n                \"tablePause\" +\n                \" type=button class=\" +\n                '\"' +\n                btnType.className +\n                '\"' +\n                \" +  rowId=\" +\n                rowId +\n                \">\" +\n                btnType.title +\n                \"</button>&nbsp;\";\n                return \"<button id='tableEdit' type='button' class='btn btn-primary' rowId=\" + rowId + '>编辑</button>&nbsp;' + pauseStr + \"<button id='tableDownload' type='button' class='btn btn-primary' rowId=\" + rowId + '>下载</button>';\n\n            }\n          }\n\n        ]\n      }\n    };\n  },\n  computed: {\n    exportOptions: function() {\n      return {\n        id: this.tableOption.tableId,\n        name: this.tableOption.tableName,\n        url: ShellApi.TableDataList\n      };\n    }\n  },\n  mounted: function() {},\n  methods: {\n    // 表格回调事件名规则   传入的按钮 key + Block\n    // 编辑按钮点击事件\n    tableEditBlock: function(rowItem) {\n      let _ = this;\n      ShellApi.GetAppInfoById({\n        AppId: rowItem[TableUniqueId]\n      }).then(res => {\n        debugger;\n        _.seleTableObj = res.result;\n        _.showAddRecordModal();\n      });\n    },\n\n    // 禁用按钮点击事件\n    tablePauseBlock: function(rowItem,btn) {\n      let _ = this;\n      ShellApi.UpdateDeleteStatus({\n        AppId: rowItem[TableUniqueId]\n      }).then(res => {\n        debugger;\n        $(btn).removeClass('btn-danger').addClass('btn-success');\n        _.$refs.table.operation(\"refresh\");\n      });\n    },\n    // 下载按钮点击事件\n    tableDownloadBlock: function(rowItem) {\n      let _ = this;\n      debugger;\n      ShellApi.GetAppXMLDownLoadUrl({ AppId: rowItem[TableUniqueId] }).then(res => {\n        if (res.success) {\n          debugger;\n          console.log(res);\n          location.href = res.result;\n        }\n      });\n    },\n    // 动态搜索回调\n    search: function(params) {\n      console.log(params);\n      // AppKey\n      // AppSecret\n      // TerminalType  1-总控机；2-分控机；3-HubApp；4-CCN；\n      // IsDelete  是否删除： 0表示是，1表示否\n      this.refreshTable(params);\n    },\n    // 新建 & 编辑表单记录完成后的回调事件\n    editCallback: function(type, params) {\n      // type = add   type = edit\n      // this.refreshTable(params);\n      this.$refs.table.operation(\"refresh\");\n    },\n    deleReportData: function(reportId) {\n      let _ = this;\n      ShellApi.DeleteTableRecord({\n        reportId: reportId\n      }).then(res => {\n        console.log(res);\n        if (res.success) {\n          _.$refs.table.tableObj.bootstrapTable(\"removeByUniqueId\", reportId);\n          layer.msg(\"删除成功\");\n        }\n      });\n    },\n    // 刷新表单\n    refreshTable: function(params) {\n      this.$refs.table.tableOption.url =\n        config.pgyerApiUrl + ShellApi.GetAppInfoList.options.url;\n      this.$refs.table.tableOption.params = params;\n      this.$refs.table.operation(\"refresh\");\n    },\n    // 显示新建 & 编辑表单记录弹框\n    showAddRecordModal: function() {\n      let _ = this;\n      _.isEdit = true;\n      _.$nextTick(() => {\n        _.layerId = layer.open({\n          type: 1,\n          title: \"添加报告记录\",\n          maxmin: false,\n          area: [\"70%\", \"70%\"],\n          content: $(\"#pop\"),\n          end: function() {\n            _.isEdit = false;\n            _.seleTableObj = {};\n          }\n        });\n      });\n    }\n  },\n\n  components: { vTable, vSearch, vEditTable, vButtons }\n};\n</script>\n<style>\n.datetimepicker {\n  z-index: 21212121 !important;\n}\n</style>\n\n"],"sourceRoot":"src/views/ShellGlobalModule/ShellGlobalCode"}]}