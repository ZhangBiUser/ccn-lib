{"remainingRequest":"/Users/hq_failmy/Desktop/文件上传管理，出参全小写/node_modules/babel-loader/lib/index.js!/Users/hq_failmy/Desktop/文件上传管理，出参全小写/src/webApi/generator/index.js","dependencies":[{"path":"/Users/hq_failmy/Desktop/文件上传管理，出参全小写/src/webApi/generator/index.js","mtime":1553140248000},{"path":"/Users/hq_failmy/Desktop/文件上传管理，出参全小写/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hq_failmy/Desktop/文件上传管理，出参全小写/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/hq_failmy/Desktop/\\u6587\\u4EF6\\u4E0A\\u4F20\\u7BA1\\u7406\\uFF0C\\u51FA\\u53C2\\u5168\\u5C0F\\u5199/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/hq_failmy/Desktop/\\u6587\\u4EF6\\u4E0A\\u4F20\\u7BA1\\u7406\\uFF0C\\u51FA\\u53C2\\u5168\\u5C0F\\u5199/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/hq_failmy/Desktop/\\u6587\\u4EF6\\u4E0A\\u4F20\\u7BA1\\u7406\\uFF0C\\u51FA\\u53C2\\u5168\\u5C0F\\u5199/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport httpInstance from \"../../js/http\";\n\nvar Generator =\n/*#__PURE__*/\nfunction () {\n  function Generator(apiAlias, baseURL) {\n    _classCallCheck(this, Generator);\n\n    this._apiAlias = apiAlias;\n    this._baseURL = baseURL;\n    this._http = httpInstance;\n    return this._mapApi();\n  }\n\n  _createClass(Generator, [{\n    key: \"_setMethodWithUri\",\n    value: function _setMethodWithUri(options) {\n      var _this = this;\n\n      options.method = options.method || 'get';\n\n      if (options.config) {\n        this._http = httpInstance.create(options.config);\n      }\n\n      return (\n        /*#__PURE__*/\n        _asyncToGenerator(\n        /*#__PURE__*/\n        regeneratorRuntime.mark(function _callee() {\n          var params,\n              requestParams,\n              response,\n              _args = arguments;\n          return regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  params = _args.length > 0 && _args[0] !== undefined ? _args[0] : {};\n                  console.group(options.url + '请求参数');\n                  console.log(params);\n                  console.groupEnd(options.url + '请求参数');\n                  requestParams = params;\n                  _context.next = 7;\n                  return _this._toHttp(options.method, options.url, requestParams);\n\n                case 7:\n                  response = _context.sent;\n\n                  if (!(response.data instanceof Object)) {\n                    _context.next = 13;\n                    break;\n                  }\n\n                  console.group(options.url + '响应');\n                  console.log(response.data);\n                  console.groupEnd(options.url + '响应');\n                  return _context.abrupt(\"return\", response.data);\n\n                case 13:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee, this);\n        }))\n      );\n    }\n  }, {\n    key: \"_toHttp\",\n    value: function _toHttp(method, url, params) {\n      if (!url) {\n        return;\n      }\n\n      if (method === 'get') {\n        params = {\n          params: params\n        };\n      }\n\n      return this._http[method](\"\".concat(this._baseURL).concat(url), params);\n    }\n  }, {\n    key: \"_mapApi\",\n    value: function _mapApi() {\n      var _this2 = this;\n\n      var facade = {};\n      Object.keys(this._apiAlias).forEach(function (key) {\n        var api = _this2._apiAlias[key];\n\n        if (api instanceof Function) {\n          facade[key] = api;\n        } else {\n          facade[key] = _this2._setMethodWithUri(api);\n          facade[key].options = api;\n        }\n      });\n      return facade;\n    }\n  }]);\n\n  return Generator;\n}();\n\nexport default Generator;",{"version":3,"sources":["/Users/hq_failmy/Desktop/文件上传管理，出参全小写/src/webApi/generator/index.js"],"names":["httpInstance","Generator","apiAlias","baseURL","_apiAlias","_baseURL","_http","_mapApi","options","method","config","create","params","console","group","url","log","groupEnd","requestParams","_toHttp","response","data","Object","facade","keys","forEach","key","api","Function","_setMethodWithUri"],"mappings":";;;;;;;AAAA,OAAOA,YAAP,MAAyB,eAAzB;;IACMC,S;;;AACF,qBAAYC,QAAZ,EAAsBC,OAAtB,EAA+B;AAAA;;AAC3B,SAAKC,SAAL,GAAiBF,QAAjB;AACA,SAAKG,QAAL,GAAgBF,OAAhB;AACA,SAAKG,KAAL,GAAaN,YAAb;AACA,WAAO,KAAKO,OAAL,EAAP;AACH;;;;sCACiBC,O,EAAS;AAAA;;AACvBA,MAAAA,OAAO,CAACC,MAAR,GAAiBD,OAAO,CAACC,MAAR,IAAkB,KAAnC;;AACA,UAAID,OAAO,CAACE,MAAZ,EAAoB;AAChB,aAAKJ,KAAL,GAAaN,YAAY,CAACW,MAAb,CAAoBH,OAAO,CAACE,MAA5B,CAAb;AACH;;AACD;AAAA;AAAA;AAAA;AAAA,gCAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAOE,kBAAAA,MAAP,2DAAgB,EAAhB;AACHC,kBAAAA,OAAO,CAACC,KAAR,CAAcN,OAAO,CAACO,GAAR,GAAc,MAA5B;AACAF,kBAAAA,OAAO,CAACG,GAAR,CAAYJ,MAAZ;AAEAC,kBAAAA,OAAO,CAACI,QAAR,CAAiBT,OAAO,CAACO,GAAR,GAAc,MAA/B;AACMG,kBAAAA,aALH,GAKmBN,MALnB;AAAA;AAAA,yBAMoB,KAAI,CAACO,OAAL,CAAaX,OAAO,CAACC,MAArB,EAA6BD,OAAO,CAACO,GAArC,EAA0CG,aAA1C,CANpB;;AAAA;AAMGE,kBAAAA,QANH;;AAAA,wBAOCA,QAAQ,CAACC,IAAT,YAAyBC,MAP1B;AAAA;AAAA;AAAA;;AAQCT,kBAAAA,OAAO,CAACC,KAAR,CAAcN,OAAO,CAACO,GAAR,GAAc,IAA5B;AACAF,kBAAAA,OAAO,CAACG,GAAR,CAAYI,QAAQ,CAACC,IAArB;AACAR,kBAAAA,OAAO,CAACI,QAAR,CAAiBT,OAAO,CAACO,GAAR,GAAc,IAA/B;AAVD,mDAWQK,QAAQ,CAACC,IAXjB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAP;AAAA;AAcH;;;4BAEOZ,M,EAAQM,G,EAAKH,M,EAAQ;AACzB,UAAI,CAACG,GAAL,EAAU;AACN;AACH;;AACD,UAAIN,MAAM,KAAK,KAAf,EAAsB;AAClBG,QAAAA,MAAM,GAAG;AACLA,UAAAA,MAAM,EAAEA;AADH,SAAT;AAGH;;AACD,aAAO,KAAKN,KAAL,CAAWG,MAAX,YAAsB,KAAKJ,QAA3B,SAAsCU,GAAtC,GAA6CH,MAA7C,CAAP;AACH;;;8BAES;AAAA;;AACN,UAAIW,MAAM,GAAG,EAAb;AACAD,MAAAA,MAAM,CAACE,IAAP,CAAY,KAAKpB,SAAjB,EAA4BqB,OAA5B,CAAoC,UAACC,GAAD,EAAS;AACzC,YAAMC,GAAG,GAAG,MAAI,CAACvB,SAAL,CAAesB,GAAf,CAAZ;;AACA,YAAIC,GAAG,YAAYC,QAAnB,EAA6B;AACzBL,UAAAA,MAAM,CAACG,GAAD,CAAN,GAAcC,GAAd;AACH,SAFD,MAEO;AACHJ,UAAAA,MAAM,CAACG,GAAD,CAAN,GAAc,MAAI,CAACG,iBAAL,CAAuBF,GAAvB,CAAd;AACAJ,UAAAA,MAAM,CAACG,GAAD,CAAN,CAAYlB,OAAZ,GAAsBmB,GAAtB;AAEH;AACJ,OATD;AAUA,aAAOJ,MAAP;AACH;;;;;;AAGL,eAAetB,SAAf","sourcesContent":["import httpInstance from \"../../js/http\";\r\nclass Generator {\r\n    constructor(apiAlias, baseURL) {\r\n        this._apiAlias = apiAlias;\r\n        this._baseURL = baseURL;\r\n        this._http = httpInstance;\r\n        return this._mapApi();\r\n    }\r\n    _setMethodWithUri(options) {\r\n        options.method = options.method || 'get';\r\n        if (options.config) {\r\n            this._http = httpInstance.create(options.config);\r\n        }\r\n        return async (params = {}) => {\r\n            console.group(options.url + '请求参数');\r\n            console.log(params);\r\n            \r\n            console.groupEnd(options.url + '请求参数');\r\n            const requestParams = params;\r\n            const response = await this._toHttp(options.method, options.url, requestParams);\r\n            if (response.data instanceof Object ) {\r\n                console.group(options.url + '响应');\r\n                console.log(response.data);\r\n                console.groupEnd(options.url + '响应');\r\n                return response.data;\r\n            }\r\n        };\r\n    }\r\n\r\n    _toHttp(method, url, params) {\r\n        if (!url) {\r\n            return\r\n        }\r\n        if (method === 'get') {\r\n            params = {\r\n                params: params\r\n            }\r\n        }\r\n        return this._http[method](`${this._baseURL}${url}`, params);\r\n    }\r\n\r\n    _mapApi() {\r\n        let facade = {};\r\n        Object.keys(this._apiAlias).forEach((key) => {\r\n            const api = this._apiAlias[key];\r\n            if (api instanceof Function) {\r\n                facade[key] = api;\r\n            } else {\r\n                facade[key] = this._setMethodWithUri(api);\r\n                facade[key].options = api;\r\n          \r\n            }\r\n        });\r\n        return facade;\r\n    }\r\n}\r\n\r\nexport default Generator"]}]}