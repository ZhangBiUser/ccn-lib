{"remainingRequest":"/Users/hq_failmy/Desktop/封装控件0422/node_modules/babel-loader/lib/index.js!/Users/hq_failmy/Desktop/封装控件0422/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/hq_failmy/Desktop/封装控件0422/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hq_failmy/Desktop/封装控件0422/src/components/dynamicSearch/upload/upload.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hq_failmy/Desktop/封装控件0422/src/components/dynamicSearch/upload/upload.vue","mtime":1556017181884},{"path":"/Users/hq_failmy/Desktop/封装控件0422/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hq_failmy/Desktop/封装控件0422/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hq_failmy/Desktop/封装控件0422/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hq_failmy/Desktop/封装控件0422/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.map\";\nimport \"core-js/modules/es6.regexp.split\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  data: function data() {\n    return {\n      val: \"\",\n      isDisabled: false,\n      seleList: [],\n      fileSize: 0,\n      filepath: ''\n    };\n  },\n  watch: {\n    val: function val(_val) {\n      debugger;\n      this.options.hasValChange && this.$emit(\"componentValueChange\", this);\n    }\n  },\n  props: [\"options\"],\n  beforeMount: function beforeMount() {\n    this.options.hasMountBefore && this.$emit(\"componentMountBefore\", this);\n\n    if (this.options.fileSizeLimit) {\n      this.fileSize = this.options.fileSizeLimit * 1024 * 1024;\n    } else {\n      this.fileSize = 3 * 1024 * 1024;\n    }\n  },\n  mounted: function mounted() {\n    this.$emit(\"componentMountAfter\", this);\n  },\n  methods: {\n    setValue: function setValue(val) {\n      var _ = this;\n\n      if (typeof val == \"string\") {\n        this.val = val;\n        this.seleList.push(val);\n      } else {\n        val = val || '';\n        this.seleList == val.split('##');\n        this.handleVal();\n      }\n    },\n    getValue: function getValue() {\n      return this.val;\n    },\n    deleteSelect: function deleteSelect(element) {\n      this.seleList.splice(element.currentTarget.id, 1);\n    },\n    showTip: function showTip() {\n      layer.tips(\"图片建议尺寸200*200，可等比缩放，文件大小不超过3MB\", \"#tip\");\n    },\n    filechange: function filechange() {\n      var _ = this;\n\n      if (_.seleList.length == _.options.uploadNum) {\n        return layer.alert(\"只能上传\" + _.options.uploadNum + \"张图片\");\n      }\n\n      var element = _.$refs.file;\n      var file_path = element.value;\n      var fileObj = element.files[0];\n\n      if (fileObj != null) {\n        if (fileObj.size > _.fileSize) {\n          return layer.alert(_.options.fileSizeLimit ? \"所选的文件超过\" + _.options.fileSizeLimit + \"MB!\" : \"所选的文件超过3MB！\");\n        }\n\n        var reader = new FileReader();\n        reader.readAsDataURL(fileObj);\n\n        reader.onload = function () {\n          _.seleList.push(reader.result);\n\n          _.handleVal();\n\n          _.filepath = '';\n          debugger;\n          console.log(_.val);\n        };\n      } else {\n        _.filepath = '';\n      }\n    },\n    handleVal: function handleVal() {\n      var _ = this;\n\n      this.seleList.map(function (item) {\n        _.val += item + \"##\";\n      });\n\n      if (this.seleList.length) {\n        _.val = _.val.substr(0, _.val.length - 2);\n      } else {\n        _.val = \"\";\n      }\n    }\n  }\n};",{"version":3,"sources":["upload.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"form-group upload-view\">\n    <div class=\"file-box\">\n      <div class=\"file-item\" v-for=\"(item, index) in seleList\" :key=\"index\">\n        <!-- <img src=\"../../../assets/images/upload.png\" alt> -->\n        <img :src=\"item\" alt>\n        <i class=\"glyphicon glyphicon-remove\" @click=\"deleteSelect\" :id=\"index\"></i>\n      </div>\n    </div>\n    <div class=\"upload-box\">\n      <img src=\"../../../assets/images/upload.png\" class=\"addImg\">\n      <input\n        ref=\"file\"\n        class=\"form-control\"\n        type=\"text\"\n        v-model=\"val\"\n        :name=\"options.key\"\n        @change=\"filechange\"\n        accept=\".png, .jpg, .jpeg\"\n        disabled=\"true\"\n      >\n      <input\n        ref=\"file\"\n        type=\"file\"\n        :value=\"filepath\"\n        :name=\"options.key\"\n        autocomplete=\"off\"\n        @change=\"filechange\"\n        accept=\".png, .jpg, .jpeg\"\n      >\n      <i\n        id=\"tip\"\n        class=\"fa fa-question-circle-o text-success\"\n        data-toggle=\"tooltip\"\n        data-placement=\"right\"\n        title\n        style=\"margin: 40px 0 0 10px;font-size: 16px;\"\n        @mouseover=\"showTip\"\n        @mouseup=\"showTip\"\n      ></i>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      val: \"\",\n      isDisabled: false,\n      seleList: [],\n      fileSize: 0,\n      filepath: ''\n    };\n  },\n  watch: {\n    val(val) {\n      debugger;\n      this.options.hasValChange && this.$emit(\"componentValueChange\", this);\n    }\n  },\n  props: [\"options\"],\n  beforeMount() {\n    this.options.hasMountBefore && this.$emit(\"componentMountBefore\", this);\n    if (this.options.fileSizeLimit) {\n      this.fileSize = this.options.fileSizeLimit * 1024 * 1024;\n    } else {\n      this.fileSize = 3 * 1024 * 1024;\n    }\n  },\n  mounted() {\n    this.$emit(\"componentMountAfter\", this);\n  },\n  methods: {\n    setValue: function(val) {\n      let _ = this;\n      if (typeof val == \"string\") {\n        this.val = val;\n        this.seleList.push(val);\n      } else {\n        val = val || '';\n        this.seleList == val.split('##');\n        this.handleVal();\n      }\n    },\n    getValue: function() {\n      return this.val;\n    },\n    deleteSelect: function(element) {\n      this.seleList.splice(element.currentTarget.id, 1);\n    },\n    showTip: function() {\n      layer.tips(\"图片建议尺寸200*200，可等比缩放，文件大小不超过3MB\", \"#tip\");\n    },\n    filechange: function() {\n      var _ = this;\n      if (_.seleList.length == _.options.uploadNum) {\n        return layer.alert(\"只能上传\" + _.options.uploadNum + \"张图片\");\n      }\n      var element = _.$refs.file;\n      var file_path = element.value;\n      var fileObj = element.files[0];\n      if (fileObj != null) {\n        if (fileObj.size > _.fileSize) {\n          return layer.alert(\n            _.options.fileSizeLimit\n              ? \"所选的文件超过\" + _.options.fileSizeLimit + \"MB!\"\n              : \"所选的文件超过3MB！\"\n          );\n        }\n\n        var reader = new FileReader();\n        reader.readAsDataURL(fileObj);\n        reader.onload = function() {\n          _.seleList.push(reader.result);\n          _.handleVal();\n          _.filepath = '';\n          debugger;\n          console.log(_.val);\n        };\n      } else {\n          _.filepath = '';\n      }\n    },\n    handleVal: function() {\n      let _ = this;\n      this.seleList.map(item => {\n        _.val += item + \"##\";\n      });\n      if (this.seleList.length) {\n        _.val = _.val.substr(0, _.val.length - 2);\n      } else {\n        _.val = \"\";\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n.upload-view {\n  position: relative;\n  width: 100%;\n  height: 100px;\n  display: inline-block;\n}\n.file-box {\n  height: 70px;\n  position: relative;\n  display: inline-block;\n}\n.file-item {\n  position: relative;\n  margin-right: 20px;\n  float: left;\n  margin-top: 28px;\n}\n.file-box img {\n  display: inline-flex;\n  width: 70px;\n  height: 70px;\n}\n.file-box i {\n  position: absolute;\n  right: -13px;\n  top: -13px;\n  color: red;\n  font-size: 16px;\n  padding: 10px;\n}\n.upload-box {\n  position: relative;\n  display: inline-block;\n}\n.upload-box img {\n  width: 70px;\n  height: 70px;\n}\n.upload-box input {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 70px;\n  height: 70px;\n  opacity: 0;\n}\n/* .upload-view {\n  position: relative;\n  display: flex;\n  width: 100%;\n  height: 100px;\n  border: 1px solid #c3c3c3;\n  align-items: center;\n}\n.file-box {\n  height: 70px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: relative;\n}\n.file-item {\n  position: relative;\n  margin-right: 20px;\n}\n.file-box img {\n  display: inline-flex;\n  width: 70px;\n  height: 70px;\n}\n.file-box i {\n  position: absolute;\n  right: -13px;\n  top: -13px;\n  color: red;\n  font-size: 16px;\n  padding: 10px;\n}\n.upload-box {\n  position: relative;\n}\n.upload-box img {\n  width: 70px;\n  height: 70px;\n}\n.upload-box input {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 70px;\n  height: 70px;\n  opacity: 0;\n} */\n</style>"],"sourceRoot":"src/components/dynamicSearch/upload"}]}